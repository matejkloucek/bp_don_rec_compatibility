#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass book
\begin_preamble
%% Font setup: please leave the LyX font settings all set to 'default'
%% if you want to use any of these packages:
\usepackage{graphicx}

%% Use Times New Roman font for text and Belleek font for math
%% Please make sure that the 'esint' package is turned off in the
%% 'Math options' page.
\usepackage[varg]{txfonts}

%% Use Utopia text with Fourier-GUTenberg math
%\usepackage{fourier}

%% Bitstream Charter text with Math Design math
%\usepackage[charter]{mathdesign}

%%---------------------------------------------------------------------

%% Make the multiline figure/table captions indent so that the second
%% line "hangs" right below the first one.
%\usepackage[format=hang]{caption}

%% Indent even the first paragraph in each section
\usepackage{indentfirst}

%%---------------------------------------------------------------------

%% Disable page numbers in the TOC. LOF, LOT (TOC automatically
%% adds \thispagestyle{chapter} if not overriden
%\addtocontents{toc}{\protect\thispagestyle{empty}}
%\addtocontents{lof}{\protect\thispagestyle{empty}}
%\addtocontents{lot}{\protect\thispagestyle{empty}}

%% Shifts the top line of the TOC (not the title) 1cm upwards 
%% so that the whole TOC fits on 1 page. Additional page size
%% adjustment is performed at the point where the TOC
%% is inserted.
%\addtocontents{toc}{\protect\vspace{-1cm}}

%%---------------------------------------------------------------------

% completely avoid orphans (first lines of a new paragraph on the bottom of a page)
\clubpenalty=9500

% completely avoid widows (last lines of paragraph on a new page)
\widowpenalty=9500

% disable hyphenation of acronyms
\hyphenation{CDFA HARDI HiPPIES IKEM InterTrack MEGIDDO MIMD MPFA DICOM ASCLEPIOS MedInria}

%%---------------------------------------------------------------------

%% Print out all vectors in bold type instead of printing an arrow above them
\renewcommand{\vec}[1]{\boldsymbol{#1}}

% Replace standard \cite by the parenthetical variant \citep
%\renewcommand{\cite}{\citep}
\end_preamble
\use_default_options false
\begin_modules
theorems-ams
logicalmkup
\end_modules
\maintain_unincluded_children false
\language american
\language_package default
\inputencoding utf8
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 11
\spacing single
\use_hyperref true
\pdf_title "Compatibility"
\pdf_author "Matěj Klouček"
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle true
\papersize a4paper
\use_geometry true
\use_package amsmath 2
\use_package amssymb 2
\use_package cancel 1
\use_package esint 0
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 0
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 3cm
\topmargin 4cm
\rightmargin 2cm
\bottommargin 3cm
\headheight 0.8cm
\headsep 1cm
\footskip 0.5cm
\secnumdepth 3
\tocdepth 2
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style swedish
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle headings
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
def
\backslash
documentdate{August 2, 2023}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

%%
\backslash
def
\backslash
documentdate{
\backslash
today}
\end_layout

\end_inset


\begin_inset Separator latexpar
\end_inset


\end_layout

\begin_layout Standard
\align block
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
pagestyle{empty}
\end_layout

\begin_layout Plain Layout

{
\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
\align block
\begin_inset Box Frameless
position "c"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "3cm"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename Images/TITLE/cvut.pdf
	display false
	width 3cm
	height 3cm
	keepAspectRatio

\end_inset


\end_layout

\end_inset


\begin_inset Box Frameless
position "c"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "60line%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status collapsed

\begin_layout Plain Layout
\align center

\shape smallcaps
\size large
Czech Technical University in Prague
\shape default

\begin_inset Newline newline
\end_inset

Faculty of Nuclear Sciences and Physical Engineering
\end_layout

\end_inset


\begin_inset Box Frameless
position "c"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "3cm"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename Images/TITLE/fjfi.pdf
	display false
	width 3cm
	height 3cm
	keepAspectRatio

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\align block
\begin_inset VSpace 3cm
\end_inset


\end_layout

\begin_layout Standard
\align block

\series bold
\size huge
Estimating Kidney Transplantation Donor-Recipient Compatibility Using Machine
 Learning
\end_layout

\begin_layout Standard
\align block
\begin_inset VSpace 1cm
\end_inset


\end_layout

\begin_layout Standard
\align block

\series bold
\size huge
\lang czech
Odhad kompatibility dárce a příjemce pro transplantaci ledvin pomocí strojového
 učení
\end_layout

\begin_layout Standard
\align block
\begin_inset VSpace 2cm
\end_inset


\end_layout

\begin_layout Standard
\align block

\size large
Bachelor's Degree Project
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
ends the centered part (the required new paragraph before "}" is inserted
 by \SpecialChar LyX
 as "}" is on a separate line.)
\end_layout

\end_inset


\begin_inset Separator latexpar
\end_inset


\end_layout

\begin_layout Standard
\align block
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Labeling
\paragraph_spacing single
\labelwidthstring MMMMMMMMM
Author: 
\series bold
Matěj Klouček
\end_layout

\begin_layout Labeling
\paragraph_spacing single
\labelwidthstring MMMMMMMMM
Supervisor: 
\series bold
Ing.
 Tomáš Kouřim
\end_layout

\begin_layout Labeling
\paragraph_spacing single
\labelwidthstring MMMMMMMMM
Consultant: 
\series bold
Ing.
 Pavel Strachota , Ph.D.
\end_layout

\begin_layout Labeling
\paragraph_spacing single
\labelwidthstring MMMMMMMMM
Academic
\begin_inset space ~
\end_inset

year: 2022/2023
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
Final dummy paragraph.
 Its function is to bear the page break flag
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset External
	template PDFPages
	filename zadani.pdf
	extra LaTeX "pages=-"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\size larger
\emph on
Acknowledgment:
\end_layout

\begin_layout Standard
\noindent
I would like to thank ............................................
 for (his/her expert guidance) and expres´s my gratitude to ..........................................
 for (his/her language assistance).
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
vfill
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent

\size larger
\emph on
Author's declaration:
\end_layout

\begin_layout Standard
\noindent
I declare that this Bachelor's Degree Project is entirely my own work and
 I have listed all the used sources in the bibliography.
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Prague, 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
documentdate
\end_layout

\end_inset


\begin_inset space \hfill{}
\end_inset

Matěj Klouček
\end_layout

\begin_layout Standard
\begin_inset VSpace 2cm
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
\noindent

\emph on
\lang czech
Název práce:
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
\noindent

\series bold
\lang czech
Odhad kompatibility dárce a příjemce pro transplantaci ledvin pomocí strojového
 učení
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Autor:
\emph default
 Matěj Klouček
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Obor:
\emph default
 Matematické inženýrství
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Zaměření:
\emph default
 Matematická informatika
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Druh práce:
\emph default
 Bakalářská práce
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Vedoucí práce:
\emph default
 Ing.
 Tomáš Kouřim, Mild Blue, s.r.o.
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Konzultant:
\emph default
 Ing.
 Pavel Strachota , Ph.D., Katedra matematiky FJFI ČVUT
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Abstrakt:
\emph default
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 Abstrakt max.
 na 10 řádků.
 
\end_layout

\begin_layout Standard

\lang czech
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
\lang czech
Klíčová slova:
\emph default
 analýza přežívání, random survival forests, strojové učení, transplantace
 ledvin
\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\begin_inset space ~
\end_inset


\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
\noindent

\emph on
Title:
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
\noindent

\series bold
Estimating kidney transplantation donor-recipient compatibility using machine
 learning
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
Author:
\emph default
 Matěj Klouček
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
Abstract:
\emph default
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
 Max.
 10 lines of English abstract text.
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\emph on
Key words:
\emph default
 Machine learning, Random survival forests, Renal transplantation, Survival
 analysis
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
pagestyle{plain}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Chapter*
Introduction
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
addcontentsline{toc}{chapter}{Introduction}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Kidney transplantation is the single best treatment for patients with end-stage
 kidney disease as it has demonstrated the best quality of life improvement
 and the best survival rate amongst other possible treatments 
\begin_inset CommandInset citation
LatexCommand cite
key "Chronic kidney allograft loss,Systematic review"
literal "false"

\end_inset

.
 However, demand for allografts greatly exceeds supply 
\begin_inset CommandInset citation
LatexCommand cite
key "Kidney transplantation,Systematic review"
literal "false"

\end_inset

 and finding a compatible donor-recipient pair is often a highly time-consuming
 task, which results in patients spending a prolonged time on the waiting
 list for potential transplantation.
 While on the waiting list, patients have to undergo dialysis multiple times
 a week for several hours, which supplements the functions of their failing
 kidneys, which greatly reduces the quality of the patient's life and puts
 an additional burden on the healthcare system.
 It is therefore crucial to minimize the time patients spend on the waiting
 list by optimizing the process of finding suitable donor-recipient pairs.
\end_layout

\begin_layout Standard
Even more important than the swiftness of the donor-recipient matchmaking,
 is the quality of the given match, as that plays the most crucial role
 in determining the patient's prospects.
 Currently, only a handful of factors are taken into consideration when
 looking for suitable donor-recipient pair, such as whether they are immunologic
ally compatible, their medical histories and their blood type.
 These methods have been proven succesful at minimizing the risk of an acute
 transplant rejection, however there may be other factors that influence
 the graft's long term performance that are currently unaccounted for.
 Therefore, in order to reduce the ﬂow of people returning to the waiting
 list and to prevent premature deaths because of failed grafts, it is necessary
 to uncover these patterns and take them into account when computing compatibili
ty between potential donors and recipients.
 This is where machine learning can play a crucial role, by analyzing large
 amounts of data and identifying patterns that can help find compatible
 pairs or conversely detect incompatible pairings that would otherwise undergo
 transplantation.
\end_layout

\begin_layout Standard
The research will involve analyzing data on past transplantations from the
 US-based 
\emph on
United Network for Organ Sharing (UNOS)
\emph default
 dataset, including information on both living and deceased donors, recipients
 and their post-transplant outcome.
 This data will be used to train and test machine learning models that can
 predict the patient's chances of surviving over time, given that they recieve
 a graft from a particular donor.
 These can then be compared in order to decide which donor-recipient pairing
 are the most compatible.
 In particular, this paper will be focused on the Random Survival Forests
 model which has demonstrated a promising performance in related scientific
 papers 
\begin_inset CommandInset citation
LatexCommand cite
key "Using ML methods to predict kidney transplant survival"
literal "false"

\end_inset

 .
 Additionally, the research will also examine the performance of the developed
 models on different population samples within the UNOS dataset.
\end_layout

\begin_layout Standard
The results of this thesis will hopefully provide valuable insights into
 application of machine learning in the field of transplantation medicine.
 If the models developed in this research are found to be effective in predictin
g compatibility, it could lead to a better and more efficient matching of
 donors and recipients, resulting in risk reduction for the transplant patients
 as complications such as graft rejection would be less probable.
 Furthermore, this research will also provide a valuable contribution to
 the broader field of medical research, by demonstrating the potential of
 machine learning in improving the success rate of medical treatments and
 reducing the burden on the healthcare system.
\end_layout

\begin_layout Chapter
Machine Learning
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
pagestyle{headings}
\end_layout

\end_inset


\end_layout

\begin_layout Section
General Overview of Machine Learning
\end_layout

\begin_layout Standard
Machine learning is a rapidly growing field within the larger discipline
 of artificial intelligence, which is concerned with the development of
 algorithms and statistical models that enable computers to autonomously
 improve their performance on a given task.
 The key idea behind machine learning is to develop algorithms that can
 identify patterns and relationships in large amounts of data, and then
 use these algorithms to make predictions or decisions based on newly introduced
 data.
\end_layout

\begin_layout Standard
In general, machine learning is a great tool when solving problems that
 would conventionally require an insurmountable amount of programming or
 when working with large amounts of data from which one could not easily
 extract information or identify meaningful patterns.
\end_layout

\begin_layout Subsection
Classification of Machine Learning Models
\end_layout

\begin_layout Standard
Machine learning models can be classified based on several parameters including
 the type of data used in training the models and the way they handle new
 data.
\end_layout

\begin_layout Subsubsection*
Classification by Data Type
\end_layout

\begin_layout Standard

\emph on
Supervised Learning
\emph default
 is a type of Machine Learning where models require a labeled dataset for
 their learning, which means that along with the data, the desired output
 needs to provided to the computer as well.
 Supervised learning can be further subdivided into Regression and Classificatio
n, based on whether the desired output is a continuous numerical value or
 a discrete one respectively.
 The examples of Supervised Learning models include: 
\emph on
Linear
\emph default
 and 
\emph on
Logistic Regression
\emph default
, 
\emph on
Random Forests
\emph default
, 
\emph on
Decision Trees
\emph default
, 
\emph on
Supporting Vector Machines
\emph default
 and 
\emph on
Neural Networks
\emph default
.
\end_layout

\begin_layout Standard
The opposite of Supervised Learning is 
\emph on
Unsupervised Learning
\emph default
, where models are trained on an unlabeled dataset with the aim of finding
 patterns in the given data or grouping data with similar characteristics.
 An example of Unsupervised Learning is 
\emph on
Clustering
\emph default
 which is used to find groups with shared characteristics, Association which
 is used to find relation between the input variables (also called predictors)
 in a given dataset, or 
\emph on
Dimensional reduction
\emph default
 which is used to simplify data in order to more easily extract information
 from it.
 
\end_layout

\begin_layout Standard
A combination of these, called 
\emph on
Semi-supervised Learning
\emph default
, uses a combination of both labeled and unlabeled data and first uses an
 Unsupervised Machine Learning model to first cluster the data in order
 to classify the unlabeled data and then uses a Supervised machine Learning
 model on this newly labeled data.
 This is advantageous to using a simple Supervised Machine Learning model
 as it allows working with larger amounts of data that would otherwise be
 unusable because of the lack of labeling, thus potentially resulting in
 higher accuracy of the model.
\end_layout

\begin_layout Standard

\emph on
Reinforcement Learning
\emph default
 is a specialized case of Semi-supervised learning, where the model is trained
 using feedback from the environment and is often used in cases where no
 labeled data exists or when the labeled dataset does not provide the best
 course of action.
 The learning system (called 
\emph on
agent
\emph default
 in this case) learns by performing actions from which it receives either
 rewards or penalties from the environment and based on these has to develop
 a strategy to maximize rewards (called 
\emph on
policy
\emph default
) 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML,Hands-On ML"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsubsection*
Instance-based vs.
 Model-based
\end_layout

\begin_layout Standard

\emph on
Instance-based
\emph default
 learning algorithms work by comparing the similarity of new input data
 to the training data, an example of this is the 
\emph on
k-Nearest Neighbors
\emph default
 algorithm, which finds 
\begin_inset Formula $k$
\end_inset

 examples from the training data that have the most similar features to
 the given input and outputs either the most frequent or the average label
 value in this cohort.
 
\end_layout

\begin_layout Standard
On the other hand 
\emph on
Model-based learning
\emph default
 algorithms develop a mathematical function whose parameters are learned
 from the training data and predictions about new data are then accomplished
 by providing the newly introduced data as an input to the function.
 Model-based learning algorithms are for example 
\emph on
Linear Regression
\emph default
 and 
\emph on
Neural Networks
\emph default
.
\end_layout

\begin_layout Section
Building a Machine Learning Model
\end_layout

\begin_layout Standard
The process of building a machine learning model generally consists of the
 following steps:
\end_layout

\begin_layout Subsection
Data Preprocessing 
\end_layout

\begin_layout Standard
Before a machine learning model can even begin to be trained, it is necessary
 that the training data is formatted correctly.
 The process of transforming the dataset into a correct format is called
 
\emph on
preprocessing
\emph default
 and is an integral part of the process of building almost every machine
 learning model.
 Preprocessing includes, but is not limited to, the following techniques.
\end_layout

\begin_layout Subsubsection*
Imputing
\end_layout

\begin_layout Standard
One of the most common challenges tackled during preprocessing is missing
 values.
 Majority of machine learning models are not capable of handling entries
 with missing features so unless there is another model at disposal that
 can handle missing values, the missing values need to handled in one of
 the following ways.
 
\end_layout

\begin_layout Standard
The easiest option is to drop columns or rows with missing values from the
 dataset.
 This is fast and reliable, however it is not optimal as it can lead to
 a potential loss of important information that the model could learn from.
 
\end_layout

\begin_layout Standard
A preferable alternative is replacing the missing values based on some given
 rule.
 This process is called 
\emph on
imputing 
\emph default
and can be performed in many different ways.
 One of the most popular imputers is the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
SimpleImputer()
\end_layout

\end_inset

 provided by the scikit-learn library described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:scikit-learn"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 For numerical features, it replaces missing values with either the mean
 or the median of the values in the column that the missing value is located
 in.
 In the case of categorical features, it replaces missing values with the
 most common category in the particular column.
 Also in the case of both categorical and numerical values, it can simply
 replace the missing values with a given constant value.
\end_layout

\begin_layout Subsubsection*
Encoding Categorical Features
\end_layout

\begin_layout Standard
Another challenge tackled during preprocessing arises from the fact that
 most machine learning models only allow numerical features as input.
 As a result, categorical values need to be transformed into numerical features
 in a process called 
\emph on
encoding
\emph default
.
 One of the most simple yet most efficient methods of encoding is one-hot
 encoding, which transforms a categorical column with unique values 
\begin_inset Formula $(x_{1},\ldots x$
\end_inset


\begin_inset Formula $_{n})$
\end_inset

 into 
\begin_inset Formula $n$
\end_inset

 columns.
 For each row, the value of the 
\begin_inset Formula $i$
\end_inset

-th newly created column is 
\begin_inset Formula $1$
\end_inset

 
\begin_inset Formula $\iff$
\end_inset

 the original categorical column had a value 
\begin_inset Formula $x_{i}$
\end_inset

.
 The other newly created columns are assigned a value of 
\begin_inset Formula $0$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\lang english
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
center
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="2">
<features booktabs="true" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
organ
\end_layout

\end_inset
</cell>
<cell alignment="none" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
R_Kidney
\end_layout

\end_inset
</cell>
<cell alignment="none" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
L_Kidney
\end_layout

\end_inset
</cell>
<cell alignment="none" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Pancreas
\end_layout

\end_inset
</cell>
<cell alignment="none" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
R_Kidney
\end_layout

\end_inset
</cell>
<cell alignment="none" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Pancreas
\end_layout

\end_inset
</cell>
<cell alignment="none" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset space \hspace{}
\length 1cm
\end_inset


\begin_inset Formula $\longrightarrow$
\end_inset


\begin_inset space \hspace{}
\length 1cm
\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="3">
<features booktabs="true" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
organ_L_Kidney
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
organ_Pancreas
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
organ_R_Kidney
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
Splitting Data into Training, Validation and Test Sets
\begin_inset CommandInset label
LatexCommand label
name "subsec:Splitting-Data-into"

\end_inset


\end_layout

\begin_layout Standard
The goal of machine learning is to create models that are able to make predictio
ns when faced with new data that the model hasn't seen during the training
 process.
 To achieve this, it is necessary to split the data into 3 parts: 
\emph on
Training set
\emph default
, 
\emph on
Validation set 
\emph default
and
\emph on
 Test set.
 
\emph default
If a model is trained using all available data, it may perform well on said
 data, but may be unable to generalize for new instances thus making it
 useless in practice, which is why it is important to keep some of the data
 aside for validation and testing.
 The datasets used for validation and testing are also referred to as the
 
\emph on
hold-out 
\emph default
sets 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
It is desirable to keep the majority of the data for training with the usual
 distribution being 70% for training and 15% for training and validation
 each, though with larger datasets, it is possible to allocate even higher
 percentage of the data to training.
\end_layout

\begin_layout Standard
Once the training of the model has been done using the training set, the
 performance of the model is tested using the test set, i.e.
 data that it hasn't seen before.
 A good metric for measuring the quality of the model is the 
\emph on
generalization error, 
\emph default
given by the error rate of the model on new cases.
 This however, is not suitable for models working with censored data, whose
 performances is usually evaluated using the C-index described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Harell's-Concordance-Index"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Better performance of the model can be achieved using a validation set,
 which gives the option to select the best values for the model's 
\emph on
hyperparameters
\emph default
 (specifics of a given machine learning model that are set before the training
 process begins).
 This is done by training the model multiple times on the training set with
 different hyperparameters and then comparing their perfomance on the validation
 set.
 Once the best model has been selected, it is then trained using both the
 training and the validation set and its performance is then measured using
 the test set 
\begin_inset CommandInset citation
LatexCommand cite
key "Hands-On ML"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsection
Evaluating Performance 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Evaluating-Performance"

\end_inset


\end_layout

\begin_layout Standard
If the model performs well on the training set (e.g.
 it's generalization error is low), but poorly on the test set, it means
 that the model has learned unnecessary details (also called 
\emph on
noise
\emph default
) from the training set which then hampers its ability to generalize for
 new instances.
 This phenomena is called 
\emph on
overfitting 
\emph default
and is a common problem that arises during the process of developing a machine
 learning model.
 Overfitting usually caused either by the data being too noisy (errors in
 the data, many outliers), the dataset being too small or by having too
 many irrelevant features.
 The above mentioned problems can be overcome by gathering more data, removing
 outliers and locating errors in the data or by simplifying the model by
 choosing fewer features.
 Another way of solving the issue of overfitting is constraining how much
 the model can change the values of its parameters, thus making the model
 simpler and less prone to overfitting.
 This is called 
\emph on
regularization 
\begin_inset CommandInset citation
LatexCommand cite
key "Hands-On ML"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
Machine learning models can also face an opposite problem, i.e.
 not being able learn the underlying patterns in the data and thus being
 inaccurate on both the test and training data.
 This is called 
\emph on
underfitting 
\emph default
and can be solved by either using a more appropriate (and more complex)
 model for the given task, selecting better features to train the model
 on or reducing any constraints that might have been set to simplify the
 model in order to prevent overfitting 
\begin_inset CommandInset citation
LatexCommand cite
key "Hands-On ML"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsection
Feature Selection
\begin_inset CommandInset label
LatexCommand label
name "subsec:Feature-Selection"

\end_inset


\end_layout

\begin_layout Standard
As mentioned in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Evaluating-Performance"
plural "false"
caps "false"
noprefix "false"

\end_inset

, one of the most common causes for overfitting is having too many features
 included in the model.
 This can be solved by only selecting the features that contribute the most
 to the model's performance.
 This can not only prevent overfitting and thus increase the model's accuracy
 scores 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-learn"
literal "false"

\end_inset

 but also greatly increase explainability of the model 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

 and speed up the training process.
 
\end_layout

\begin_layout Standard
In the case of classification decision trees and random forests described
 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Decision-Trees-and"
plural "false"
caps "false"
noprefix "false"

\end_inset

, feature importance is most commonly computed using the 
\emph on
mean decrease in impurity 
\emph default
(MDI) also known 
\emph on
Gini importance.

\emph default
 For each feature used as an input for a given tree, the MDI is calculated
 as the mean improvement in the accuracy of the given tree when splitting
 on this feature.
 In the case of random forests, this importance is then averaged over all
 trees.
 This is a very efficient way of computing feature importance as it can
 be calculated during the training process.
 However this method can be biased towards overestimating importance of
 variables with bigger scaled values .
\end_layout

\begin_layout Standard
A more reliable, though more computationally demanding, alternative is the
 
\emph on
permutation importance 
\emph default
described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Permutation-Variable-Importance"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Subsection
Hyperparameter tuning
\begin_inset CommandInset label
LatexCommand label
name "subsec:Hyperparameter-tuning"

\end_inset


\end_layout

\begin_layout Standard
An integral part of building a well-performing machine learning model is
 selecting the best hyperparameters for a given algorithm.
 These parameters are not optimized by the learning algorithm itself and
 therefore require experimentation to find the best combination of values
 for them 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

.
 
\end_layout

\begin_layout Standard
A common way of finding the best combination of hyperparameters is 
\emph on
grid search
\emph default
, which works by creating a set of values for each hyperparameter and then
 evaluating the model's performance for every combination of these hyperparamete
rs.
 For numerical parameters, a logarithmic scale is typically used to create
 a set of possible values (e.q.
 
\begin_inset Formula $\left[0.01,0.1,1,10,100,1000\right]$
\end_inset

), while for categorical hyperparamaters, it is possible to simply iterate
 over all possible values.
 When the best combination of hyperparameters is found, it can be beneficial
 to experiment with values closer to the found optimal combination 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

.
 
\end_layout

\begin_layout Section
Decision Trees and Random Forests
\begin_inset CommandInset label
LatexCommand label
name "sec:Decision-Trees-and"

\end_inset


\end_layout

\begin_layout Subsection
Decision Trees
\begin_inset CommandInset label
LatexCommand label
name "subsec:Decision-Trees"

\end_inset


\end_layout

\begin_layout Standard
Decision Trees are a supervised, model-based machine learning method used
 for both regression and classification, whose main benefits are that it
 can handle complex and nonlinear relations in data.
 There are two types of decision trees based on the type of target variable:
 
\emph on
Classification trees 
\emph default
and 
\emph on
Regression trees.
 
\end_layout

\begin_layout Standard
Decision trees are in practice mostly binary trees where in each parent
 node (also called 
\emph on
decision node
\emph default
), a specific attribute of the feature vector is examined and a split is
 made based on a given criteria whose specifics are learned during the training
 process.
 For example if a value of the given attribute is below a specific threshold,
 the left branch is followed, otherwise the right branch is followed, with
 the threshold being set to maximize a certain performance metric of the
 model.
 Once the leaf node (also called 
\emph on
terminal node
\emph default
) is reached, the example is assigned a probability of belonging to a given
 categorical value in case of a classification tree or assigned a real target
 value in case of a regression tree.
 
\end_layout

\begin_layout Standard
Different decision tree algorithms use different split rules also known
 as 
\emph on
criterions.

\emph default
 For example, one of the most common algorithms used for generating a classifica
tion tree is called ID3, which selects what attributes from the feature
 vector to split upon based on 
\emph on
Entropy
\emph default
, 
\emph on
Information gain 
\emph default
or 
\emph on
Gini Impurity
\emph default
 of the subsets created by the split made on each feature.
 In the case of Regression Trees, the criterion used is often based on the
 reduction of 
\emph on
variance
\emph default
 or 
\emph on
standard deviation
\emph default
 between labels and their mean values.
 Another type of criterion is used by the decision trees in Random Survival
 Forests, described in more detail in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Random-Survival-Forests"
plural "false"
caps "false"
noprefix "false"

\end_inset

, which use a log-rank test statistic in order to maximize the difference
 between the predicted survival time in each leaf node.
\end_layout

\begin_layout Subsubsection
Building a Classification Tree
\end_layout

\begin_layout Standard
A classification tree using the ID3 algorithm is built as follows 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

:
\begin_inset Newline newline
\end_inset

Let 
\begin_inset Formula $C$
\end_inset

=
\begin_inset Formula $\left\{ 1,2,\ldots,p\right\} $
\end_inset

 be the set of possible categorical values, 
\begin_inset Formula $\left\{ \left(x^{(i)},y^{(i)}\right)\right\} _{i=1}^{N}$
\end_inset

is a collection of labeled examples with numerical predictors, where 
\begin_inset Formula $N$
\end_inset

 is the size of the collection, 
\begin_inset Formula $\mathbf{x}^{(i)}=(x_{1}^{(i)},\ldots,x_{k}^{(i)})$
\end_inset

 is a 
\begin_inset Formula $k$
\end_inset

-dimensional feature vector of the example 
\begin_inset Formula $i\in\hat{N}$
\end_inset

 and 
\begin_inset Formula $y^{(i)}\in C$
\end_inset

 is its label.
 The decision tree model is denoted by
\begin_inset Formula $f(\mathbf{x})$
\end_inset

 which is a function that estimates the probability of a given example to
 be of class 
\begin_inset Formula $a\in C$
\end_inset

 i.e.
 it is defined as
\begin_inset Formula 
\begin{equation}
f(\mathbf{x},a)\stackrel{\mathrm{def}}{=}\Pr\left(y=a\mid\mathbf{x}\right),\label{eq:class tree def}
\end{equation}

\end_inset

where 
\begin_inset Formula $\mathbf{x}$
\end_inset

 is a 
\begin_inset Formula $k$
\end_inset

-dimensional feature vector and 
\begin_inset Formula $y$
\end_inset

 is a random variable describing the class of a given example.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $S_{i}$
\end_inset

 denote the set of labeled examples included in a given node 
\begin_inset Formula $i$
\end_inset

 , 
\begin_inset Formula $p^{S_{i}}(a)$
\end_inset

 denote the proportion of the examples in 
\begin_inset Formula $S_{i}$
\end_inset

 that belong to class 
\begin_inset Formula $a$
\end_inset

 and let 
\begin_inset Formula $F_{i}$
\end_inset

 denote the set of all possible features in a given node 
\begin_inset Formula $i$
\end_inset

.
 In the first step of the algorithm, the decision tree is consists of only
 its root node that contains all of the labeled examples i.e.
 
\begin_inset Formula $S_{0}=$
\end_inset

 
\begin_inset Formula $\left\{ \left(x^{(i)},y^{(i)}\right)\right\} _{i=1}^{N}$
\end_inset

, all features are available i.e.
 
\begin_inset Formula $F_{0}=\hat{k}$
\end_inset

 and the proportion is given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
p^{S_{0}}\left(a\right)=\frac{\left|\left\{ \left(\mathbf{x}^{(i)},y^{(i)}\right)\mid y^{(i)}=a,\left(\mathbf{x}^{(i)},y^{(i)}\right)\in S_{0}\right\} \right|}{\left|S_{0}\right|}.\label{eq:class tree proportion}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
The next step of the algorithm is to iterate over all possible features
 
\begin_inset Formula $j\in F_{0}$
\end_inset

 and all possible threshold values 
\begin_inset Formula $t$
\end_inset

 (the possible threshold values can be chosen, for example, as midpoints
 between values of the predictors e.g.
 if the predictor 
\begin_inset Formula $j$
\end_inset

 takes on the values 
\begin_inset Formula $\left[1,2,3\right]$
\end_inset

 then we may choose the possible threshold values as 
\begin_inset Formula $\left[1.5,2.5\right]$
\end_inset

) and split 
\begin_inset Formula $S_{0}$
\end_inset

 into two subsets defined as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
S_{0-}\stackrel{\mathrm{def}}{=}\left\{ \left(\mathbf{x},y\right)\mid\left(\mathbf{x},y\right)\in S_{0},x_{j}<t\right\} \quad\mathrm{and}\quad S_{0+}\stackrel{\mathrm{def}}{=}\left\{ \left(\mathbf{x},y\right)\mid\left(\mathbf{x},y\right)\in S_{0},x_{j}\geq t\right\} .\label{eq:class tree split}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
For each iteration (ordered pair 
\begin_inset Formula $\left(j,t\right)$
\end_inset

), the quality of the split is calculated by using the algorithm's criterion.
 Assuming that the tree's criterion is entropy, the entropy of a given set
 of examples is given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
H(S)=-\sum_{a\in S}p^{S}\left(a\right)\log_{2}p^{S}\left(a\right).\label{eq:entropy}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
The quality of the given split is then determined by the weighted sum of
 the entropies of the two subsets created by the split i.e.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
H(S_{-},S_{+})=\frac{\left|S_{-}\right|}{\left|S\right|}H(S_{-})+\frac{\left|S_{+}\right|}{\left|S\right|}H(S_{+}),\label{eq:class tree entropy}
\end{equation}

\end_inset

where the goal is to minimize 
\begin_inset Formula $H(S_{-},S_{+})$
\end_inset

.
\end_layout

\begin_layout Standard
Once the best split has been found, each of the created subsets serves as
 a new decision node, i.e.
 
\begin_inset Newline newline
\end_inset

 
\begin_inset Formula $S_{1}\coloneqq S_{0-}$
\end_inset

, 
\begin_inset Formula $S_{2}:=$
\end_inset


\begin_inset Formula $S_{0+}$
\end_inset

 and the branching continues considering only the attributes that were not
 previously used, i.e.
 given that 
\begin_inset Formula $j_{0}\in F_{0}$
\end_inset

 was chosen as the optimal predictor to split upon, then 
\begin_inset Formula $F_{1}=F_{2}=F_{0}\setminus\left\{ j_{0}\right\} $
\end_inset


\end_layout

\begin_layout Standard
The algorithm stops if either there are no further attributes to split upon,
 all possible decisions would reduce entropy less then some set amount or
 the tree reaches a set maximum depth (the minimum number of edges connecting
 the root to a leaf node).
\end_layout

\begin_layout Standard
When a new input 
\begin_inset Formula $\mathbf{x}$
\end_inset

 is introduced in the form of a 
\begin_inset Formula $k-$
\end_inset

dimensional vector whose attributes are of the same data type as in the
 feature vectors 
\begin_inset Formula $\mathbf{x}^{(i)}$
\end_inset

, the decision tree is followed from the root down, evaluating the attributes
 of 
\begin_inset Formula $\mathbf{x}$
\end_inset

 in each decision node until a leaf node is reached.
 Let 
\begin_inset Formula $S_{n}$
\end_inset

 denote such leaf node, then for 
\begin_inset Formula $\forall a\in C$
\end_inset


\begin_inset Formula 
\begin{equation}
f(\mathbf{x},a)=p^{S_{n}}\left(a\right)=\frac{\left|\left\{ \left(\mathbf{x}^{(i)},y^{(i)}\right)\in S_{n}\mid y^{(i)}=a\right\} \right|}{\left|S_{n}\right|}.\label{eq:class tree final}
\end{equation}

\end_inset


\end_layout

\begin_layout Subsubsection
Building a Regression Tree
\end_layout

\begin_layout Standard
This time suppose the opposite case i.e.
 that the dataset consists of examples with categorical valued predictors
 and labels with continuous numerical values.
 As a result, the Standard Deviation Reduction algorithm would be good choice
 to build the regression tree.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $X_{j}$
\end_inset

 be the set of all possible categorical values for the feature 
\begin_inset Formula $j\in\hat{k},$
\end_inset

where 
\begin_inset Formula $k$
\end_inset

 is the total number of features in the dataset.
 Again let 
\begin_inset Formula $\left\{ \left(x^{(i)},y^{(i)}\right)\right\} _{i=1}^{N}$
\end_inset

 denote a collection of labeled examples, where 
\begin_inset Formula $N$
\end_inset

 is the size of the collection, 
\begin_inset Formula $\mathbf{x}^{(i)}=(x_{1}^{(i)},\ldots,x_{k}^{(i)})$
\end_inset

 is a 
\begin_inset Formula $k$
\end_inset

-dimensional feature vector of the example 
\begin_inset Formula $i\in\hat{N}$
\end_inset

, where 
\begin_inset Formula $x_{j}^{(i)}\in X_{j}$
\end_inset

 for 
\begin_inset Formula $\forall j\in\hat{k}$
\end_inset

 and 
\begin_inset Formula $y^{(i)}\in\mathbb{R}^{+}$
\end_inset

 is the target value.
 The decision tree model will this time be a function that takes a 
\begin_inset Formula $k$
\end_inset

-dimensional feature vector with the same type of attributes as 
\begin_inset Formula $\mathbf{x}^{(i)}$
\end_inset

, 
\begin_inset Formula $i\in\hat{k}$
\end_inset

 as input, i.e.
 if 
\begin_inset Formula $\mathbf{x=}(x_{1},\ldots,x_{k})$
\end_inset

 then 
\begin_inset Formula $x_{j}\in X_{j}$
\end_inset

 for 
\begin_inset Formula $\forall j\in\hat{k}$
\end_inset

 and outputs a real valued estimation, i.e.
 
\begin_inset Formula $f(\mathbf{x})\in\mathbb{R}^{+}$
\end_inset

.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $S_{i}$
\end_inset

 denote the set of labeled examples included in a given node 
\begin_inset Formula $i$
\end_inset

, 
\begin_inset Formula $F_{i}$
\end_inset

 is the set of all possible features in the node 
\begin_inset Formula $S_{i}$
\end_inset

, 
\begin_inset Formula $\sigma(S_{i})$
\end_inset

 is the standard deviation for labels in 
\begin_inset Formula $S_{i}$
\end_inset

, while 
\begin_inset Formula $\sigma\left(S_{i},j\right)$
\end_inset

 is standard deviation in 
\begin_inset Formula $S_{i}$
\end_inset

 for feature 
\begin_inset Formula $j\in F_{i}$
\end_inset

.
\end_layout

\begin_layout Standard
In the first step of the algorithm, again the decision tree consists of
 only its root node that contains all labeled example i.e.
 
\begin_inset Formula $S_{0}=$
\end_inset

 
\begin_inset Formula $\left\{ \left(x^{(i)},y^{(i)}\right)\right\} _{i=1}^{N}$
\end_inset

, 
\begin_inset Formula $F_{0}=\hat{k}$
\end_inset

.
 The standard deviation of all labels in 
\begin_inset Formula $S_{0}$
\end_inset

 given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\sigma\left(S_{0}\right)=\sqrt{\frac{1}{N}\sum_{i=1}^{N}\left(y^{(i)}-\overline{y}\right)^{2}},
\end{equation}

\end_inset

where 
\begin_inset Formula $N$
\end_inset

 is the number of examples in 
\begin_inset Formula $S_{0}$
\end_inset

 and 
\begin_inset Formula $\overline{y}$
\end_inset

 is the mean value of labels in 
\begin_inset Formula $S_{0}$
\end_inset

.
\end_layout

\begin_layout Standard
For 
\begin_inset Formula $\forall j\in F_{0}$
\end_inset

, the standard deviation for the feature 
\begin_inset Formula $j$
\end_inset

 is then calculated by
\begin_inset Formula 
\begin{equation}
\sigma\left(S_{0},j\right)=\sum_{c\in X_{j}}p\left(c\right)\sigma\left(c\right)
\end{equation}

\end_inset

where 
\begin_inset Formula $p\left(c\right)$
\end_inset

 is the proportion of examples in 
\begin_inset Formula $S_{0}$
\end_inset

 whose feature 
\begin_inset Formula $j$
\end_inset

 belongs to the class 
\begin_inset Formula $c$
\end_inset

.
 Let 
\begin_inset Formula $N_{c}$
\end_inset

 denote the number of examples in 
\begin_inset Formula $S_{0}$
\end_inset

 whose feature 
\begin_inset Formula $j$
\end_inset

 belongs to the class 
\begin_inset Formula $c$
\end_inset

 i.e.
 
\begin_inset Formula $N_{c}=|\left\{ \left(\mathbf{x}^{(i)},y^{(i)}\right)\in S_{0}\mid x_{j}^{(i)}=c\right\} |$
\end_inset

, then 
\begin_inset Formula $p\left(c\right)$
\end_inset

 is given by
\begin_inset Formula 
\begin{equation}
p\left(c\right)=\frac{N_{c}}{\left|S_{0}\right|}
\end{equation}

\end_inset

and 
\begin_inset Formula $\sigma\left(c\right)$
\end_inset

 is the standard deviation of labels in 
\begin_inset Formula $S_{0}$
\end_inset

 whose feature 
\begin_inset Formula $j$
\end_inset

 belongs to the class c, i.e.
\begin_inset Formula 
\begin{equation}
\sigma\left(c\right)=\sqrt{\frac{1}{N_{c}}\sum_{i=1}^{N_{c}}\left(y_{c}^{(i)}-\overline{y_{c}}\right)^{2}}
\end{equation}

\end_inset

where 
\begin_inset Formula $y_{c}^{(i)}$
\end_inset

 are the labels of examples whose feature 
\begin_inset Formula $j$
\end_inset

 belongs to the class 
\begin_inset Formula $c$
\end_inset

 and 
\begin_inset Formula $\overline{y_{c}}$
\end_inset

 is their mean value.
\end_layout

\begin_layout Standard
The best split is then chosen as the one with the highest 
\emph on
standard deviation reduction
\emph default
 given by
\begin_inset Formula 
\begin{equation}
\varDelta\sigma\left(S_{0},j\right)=\sigma\left(S_{0}\right)-\sigma\left(S_{0},j\right).
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $S_{0}$
\end_inset

 is then split into subsets based on the chosen feature 
\begin_inset Formula $j$
\end_inset

 (the split is not necessarily binary), i.e.
\begin_inset Formula 
\begin{equation}
S_{c}=\left\{ \left(x^{(i)},y^{(i)}\right)\in S_{0}\mid x_{j}^{(i)}=c\right\} \qquad\forall c\in X_{j}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
where each 
\begin_inset Formula $S_{c}$
\end_inset

 then serves as a new decision node and the process repeats.
\end_layout

\begin_layout Standard
The algorithm is stopped if either the selected reduction in variation is
 below a set threshold, there are no more features to split upon or if the
 tree reaches set maximum depth.
 
\end_layout

\begin_layout Standard
When the model is presented with a new input 
\begin_inset Formula $\mathbf{x}$
\end_inset

, it follows the tree from the root down until a leaf node is reached.
 Let 
\begin_inset Formula $S_{n}$
\end_inset

 denote such a leaf node , then output values is given by the average value
 of the labels in 
\begin_inset Formula $S_{n}$
\end_inset

, i.e.
\begin_inset Formula 
\begin{equation}
f\left(\mathbf{x}\right)=\frac{1}{\left|S_{n}\right|}\sum_{(\mathbf{x}^{(i)},y^{(i)})\in S_{n}}y^{(i)}.
\end{equation}

\end_inset


\end_layout

\begin_layout Subsection
Ensemble Learning and Random Forests 
\end_layout

\begin_layout Standard

\emph on
Ensemble learning 
\emph default
is a machine learning technique that combines the predictions of multiple
 simpler models in order to boost its overall performance on a given task.
 An example of an ensemble learning method are 
\emph on
random forests
\emph default
, which build on the foundation of decision trees by aggregating the predictions
 made by a set amount of decision trees, allowing the model to make more
 accurate predictions than any single decision tree could make by itself.
 The key idea behind random forests is that every decision tree is trained
 using a different sample of input features, which helps reduce overfitting
 and improves the generalization capabilites of the model.
\end_layout

\begin_layout Standard
An example of a random forests model is training a group of classification
 trees on different random subsets of the training data and when faced with
 new input, predicting the class of the given input by choosing the class
 that got the most 
\begin_inset Quotes sld
\end_inset

votes
\begin_inset Quotes srd
\end_inset

 by the classification trees 
\begin_inset CommandInset citation
LatexCommand cite
key "Hands-On ML"
literal "false"

\end_inset

.
 A class 
\begin_inset Formula $c$
\end_inset

 gets a 
\begin_inset Quotes sld
\end_inset

vote
\begin_inset Quotes srd
\end_inset

 by the decision tree when the input 
\begin_inset Formula $\mathbf{x}$
\end_inset

 is assigned the highest probability of belonging to 
\begin_inset Formula $c$
\end_inset

, i.e.
 class 
\begin_inset Formula $c\in C$
\end_inset

 gets the vote 
\begin_inset Formula $\Longleftrightarrow c=\underset{a\in C}{\arg\max}$
\end_inset


\begin_inset Formula $\Pr\left(y=a\mid\mathbf{x}\right)$
\end_inset

 , where 
\begin_inset Formula $C$
\end_inset

 is the set of all possible classes.
\end_layout

\begin_layout Subsubsection
Building a Random Forest
\end_layout

\begin_layout Standard
The process of building a random forest model can divided into four steps
 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML,Hands-On ML"
literal "false"

\end_inset

:
\end_layout

\begin_layout Enumerate

\emph on
Sampling the data:
\begin_inset CommandInset label
LatexCommand label
name "enu:Sampling-the-data:"

\end_inset

 
\emph default
In order to boost the performance of a random forests model (and other ensemble
 learning methods), it is vital to train the decision trees on different
 samples of the data in order to minimize risk of the predictors making
 the same kind of error.
 Samples are taken randomly from the dataset in order to create multiple
 different subsets of the data.
 This process can be divided based on whether the samples are taken 
\begin_inset Quotes sld
\end_inset

with replacement
\begin_inset Quotes srd
\end_inset

 or not i.e.
 whether instances of the data can be used in training of multiple predictors
 or just once, this is called 
\emph on
bagging 
\emph default
(abbreviation of 
\emph on
bootstrap aggregating
\emph default
) and
\emph on
 pasting 
\emph default
respectively, with bagging being the generally more often used case for
 random forests.
\end_layout

\begin_layout Enumerate

\emph on
Feature sampling: 
\emph default
In order to even more differentiate the individual decision trees, only
 a random subset of the input features are considered when building a particular
 decision tree.
 The model will perform best when the input feature are independent of each
 other.
 
\end_layout

\begin_layout Enumerate

\emph on
Building the decision trees
\emph default
: For each sample of the data and input features, a decision tree is built
 using a given split criterion.
 For even more randomized trees it is possible to randomly select the threshold
 values for each split in the decision trees, instead of searching for the
 best possible threshold.
 These are called 
\emph on
Extremely Randomized Trees.
\end_layout

\begin_layout Enumerate

\emph on
Aggregating Predictions
\emph default
: Random forests make predictions by aggregating the predictions made by
 the individual decision trees, for example in the case of classification
 task, the class with the biggest amount of votes is selected while in the
 case of a regression task, the predicted value is calculated by averaging
 the values predicted by the individual decision trees.
\end_layout

\begin_layout Standard
The most important hyperparameters to be set before the beginning of the
 training process are the number of trees in the forest, the size of the
 bootstrap sample, the size of the feature sample, and the split criterion
 used to build the decision trees.
\end_layout

\begin_layout Chapter
Renal Transplantation
\end_layout

\begin_layout Section
Chronic Kidney Disease
\end_layout

\begin_layout Standard
The 
\emph on
chronic kidney disease 
\emph default
(CKD)
\emph on
 
\emph default
is a medical condition in which the kidneys gradually lose their ability
 to filter waste products and excess fluids from the blood system.
 CKD is the main cause for renal transplantation worldwide as roughly 90%
 of all renal transplantation are performed to treat the 
\emph on
end-stage renal disease
\emph default
, which is the final stage of CKD.
 The prevalence of CKD is estimated to be between 8% and 16% worldwide 
\begin_inset CommandInset citation
LatexCommand cite
key "CKD: Global Dimensions and Perspectives"
literal "false"

\end_inset

 and is observed to be on the rise, as in 2015, CKD caused roughly 
\begin_inset Formula $1.2$
\end_inset

 million deaths compared to 
\begin_inset Formula $409,000$
\end_inset

 in 1990.
 Symptoms of CKD include fatigue, nausea, loss of appetite, leg swelling
 and itching.
 As the disease progresses, it may result in health complications such as
 anemia, cardiovascular disease, bone disease and nerve damage.
 In the final stages when the kidneys fail altogether, the affected person
 needs to regularly undergo dialysis, which supplements the kidney's functions.
 However, this needs to be done several times a week and each session lasts
 between 3 to 5 hours, which results in a significant decrease in the quality
 of the patients life.
 Thus when possible, transplantation is a much preferred treatment for CKD.
\end_layout

\begin_layout Section
Pre-Transplant Procedures
\end_layout

\begin_layout Standard
There are number of procedures that a patient has to undergo before they
 are admitted onto the kidney transplantation waiting list.
\end_layout

\begin_layout Standard
Firstly, their overall health is checked in order evaluate whether they
 are suitable candidate for the procedure.
 This includes blood tests, imaging studies, and other diagnostic tests
 to check for any underlying health conditions that could affect the success
 of the transplantation.
\end_layout

\begin_layout Standard
Secondly, a process called 
\emph on
HLA typing 
\emph default
is performed both on the patient and the recipient.
 HLA typing assumes paramount importance in determining the immunological
 compatibility between the donor and the recipient, which is necessary for
 a successful transplantation.
 Transplantation between a incompatible paring could lead to an acute transplant
 rejection, which happens when the recipient's immune system perceives the
 graft as foreign and rejects it.
\end_layout

\begin_layout Subsection
HLA Typing 
\begin_inset CommandInset label
LatexCommand label
name "subsec:HLA-Typing"

\end_inset


\end_layout

\begin_layout Standard
The process of HLA typing involves testing the person's blood and tissue
 to determine their 
\emph on
human leukocyte antigen
\emph default
 (HLA) type, which is a protein that plays a key role in the body's immune
 response.
 Incompatible pairs are discarded while potentially compatible pairs have
 their blood tested against each other in a laboratory using a process called
 
\emph on
cross-matching.
\end_layout

\begin_layout Standard

\emph on
Cross-matching
\emph default
 involves testing the blood of the potential donor against the blood of
 the recipient to ensure that there are no antibodies that could cause a
 reaction.
 If the recipient's serum contains antibodies that react with the donor's
 cells, the complement will be activated and will cause the cells to burst,
 or lyse.
 This reaction can be seen under a microscope, and the degree of lysis can
 be graded to determine the strength of the reaction.
 When no reaction occurs, the cross-match is called 
\emph on
negative
\emph default
, whereas if a reaction occurs, the cross-match is called 
\emph on
positive.
 
\emph default
A positive cross-match does not automatically mean that the transplantation
 cannot proceed though, as a successful transplantation may still be possible
 if the reaction is not too severe, given that the patient is in favorable
 health condition and that they are given additional treatment with immunosuppre
ssive drugs that suppress the activity of the immune system.
 This is often the case when other donors are not easily available.
\end_layout

\begin_layout Standard
The decision on which pairings to discard and which ones to to perform a
 cross-match on is done by calculating a 
\emph on
HLA mismatch 
\begin_inset CommandInset label
LatexCommand label
name "HLA mismatch"

\end_inset

.
 
\emph default
The HLA antigens are classified based on their biochemical and functional
 properties 
\begin_inset CommandInset citation
LatexCommand cite
key "Kidney transplantation"
literal "false"

\end_inset

: 
\emph on
HLA class I
\emph default
 and 
\emph on
HLA class II.
 
\emph default
Class I antigens are present on the surface of most nucleated cells in the
 body, while class II antigens are specific to certain cells related to
 immune function 
\begin_inset CommandInset citation
LatexCommand cite
key "Kidney transplantation"
literal "false"

\end_inset

.
 These classes are then further subdivided into loci ( a locus denotes a
 specific position on a chromosome): HLA-A, HLA-B and HLA-C in the case
 of HLA class I and HLA-DR, HLA-DQ, HLA-DP in the case of HLA class II.
 Each locus is further divided into alleles (an allele represents specific
 DNA sequences at a given locus): HLA-B27, HLA-DRB101, and so on 
\begin_inset CommandInset citation
LatexCommand cite
key "Kidney transplantation"
literal "false"

\end_inset

.
 When calculating the HLA mismatch, a score is given based on the number
 of allele mismatches for each subclass (HLA-A, HLA-DR, etc.).
 A higher score indicates a greater degree of immunological incompatibility
 in the pairing as the best transplant survival has been achieved with no
 mismatches at HLA-A, -B and -DR.
 The relationship between HLA mismatches and allograft survival time has
 been revealed thanks to the UNOS data, that will be used later 
\begin_inset CommandInset citation
LatexCommand cite
key "Kidney transplantation"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
Within the UNOS dataset, only the HLA-A, HLA-B and HLA-DR loci are being
 used computing mismatch.
 More specifically, the alleles of only two antigens are tracked for each
 of the mentioned loci.
 As illustrated in table 
\begin_inset CommandInset ref
LatexCommand ref
reference "HLA mismatch table"
plural "false"
caps "false"
noprefix "false"

\end_inset

 a mismatch is calculated for each locus (A, B, DR) by counting how many
 of the two antigens are different between the donor and the recipient.
 The overall HLA mismatch is then given by the sum of these locus mismatches.
 Note that D- represents donor's typing while R- represents recipient's
 typing.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
HLA Mismatch
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
resizebox{
\backslash
textwidth}{!}{
\end_layout

\end_inset


\lang english

\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="16">
<features booktabs="true" tabularvalignment="middle">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<row>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DA1
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DA2
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DB1
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DB2
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DDR1
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DDR2
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RA1
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RA2
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RB1
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RB2
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RDR1
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RDR2
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
AMIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
AMIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DRMIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
HLAMIS
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
3.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
24.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
35.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
44.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
26.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
38.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
44.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
4.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
4.0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
3.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
32.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
18.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
44.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
11.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
97.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
23.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
44.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
62.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
7.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
11.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
3.0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
24.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
35.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
41.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
8.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
15.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
29.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
27.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
44.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
4.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
7.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
5.0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
25.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
7.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
27.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
13.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
3.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
25.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
7.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
27.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
13.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
26.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
29.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
7.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
41.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
7.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
13.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
68.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
35.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
39.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
3.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
97.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
2.0
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
6.0
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "HLA mismatch table"

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Section
Goals
\end_layout

\begin_layout Standard
The aforementioned procedures have been very successful at reducing the
 risk of graft failure shortly after the transplantation.
 In recent years, improvements in these techniques have successfully minimized
 the risk of an acute transplantation rejection within the first year of
 the transplantation below 
\begin_inset Formula $15\%$
\end_inset

 
\begin_inset CommandInset citation
LatexCommand cite
key "Chronic kidney allograft loss"
literal "false"

\end_inset

.
 Nevertheless, it may be possible that there are yet undiscovered correlations
 effecting the long-term performance of the graft, that are not being accounted
 for in the current donor-recipient matchmaking process.
 The progress that has been made in the field of transplantation medicine
 has also resulted in the abundance of data about both pre-transplant conditions
 as well as patient follow-up.
 This presents an opportunity for the use of machine learning techniques,
 aimed at uncovering these correlations.
 
\end_layout

\begin_layout Standard
Given that the majority of well-documented data originates from the last
 30 years, which is significantly shorter than the average human lifespan,
 solely considering patients whose grafts have already failed would introduce
 a bias towards individuals who had a lower probability of survival from
 the outset.
 Therefore, it is necessary to include all patients in the analysis, including
 those with functioning grafts as well as those lost to follow-up (i.e.
 the status of their graft is unknown).
 The difficulty lies in the fact that conventional machine learning models
 do not inherently handle this type of data when considering the patient's
 survival time as the target variable.
 However, there exists a field of statistics that addresses these challenges
 called 
\emph on
survival analysis
\emph default
.
\end_layout

\begin_layout Chapter
Survival Analysis
\end_layout

\begin_layout Section
Introduction to Survival Analysis
\end_layout

\begin_layout Standard
Survival analysis is a collection of statistical procedures for data analysis
 for which the outcome variable of interest is time until an event occurs,
 usually referred to as 
\emph on
time-to-event 
\emph default
or 
\emph on
survival time.

\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 More specifically, time-to-event refers to the time from the beginning
 of a follow-up i.e.
 the period during which the subject of a study is observed, usually from
 the date of diagnosis, the start of a treatment or transplantation, until
 the occurrence of an event of interest, usually meaning the death of a
 patient, disease incidence, relapse from remission, recovery or in the
 case of kidney transplantation: 
\emph on
graft failure
\emph default
.
 Survival analysis involves several statistical techniques that are used
 during the pre-transplant procedure as a part of the process of finding
 compatible donor-recipient pairing, namely the 
\emph on
Kaplan-Meier estimator
\emph default
, the 
\emph on
Log-Rank test 
\emph default
and the 
\emph on
Cox proportional hazards model
\emph default
 just to name a few.
 These will be explained in detail further in this chapter.
\end_layout

\begin_layout Subsection
Data Censoring
\end_layout

\begin_layout Standard
A crucial challenge that all survival analysis methods have to tackle is
 
\emph on
data censoring
\emph default
, which refers to the lack of data about the exact survival time of an individua
l, which happens, for example, as a result of a study ending before the
 said individual experiences an event or if the individual withdraws from
 the study.
 This kind of censoring is called 
\emph on
right censoring, 
\emph default
meaning that if the survival time were to be plotted along a horizontal
 axis, the event would happen to the right side of the cutoff point of the
 study, but it is unknown by how much.
 
\end_layout

\begin_layout Standard

\emph on
Left censored 
\emph default
data are also possible, but they are uncommon in the case of post-tranplantation
 data as the the date of transplantation is naturally almost always known.
 Left censoring can happen, for example, in the case of predicting the survival
 time after exposure to a virus, as the exact date of this occurrence is
 often unknown.
\end_layout

\begin_layout Subsection
Survival and Hazard Functions
\begin_inset CommandInset label
LatexCommand label
name "subsec:Survival-and-Hazard"

\end_inset


\end_layout

\begin_layout Standard
The two fundamental functions of survival analysis are the 
\emph on
survival function 
\emph default
denoted by 
\begin_inset Formula $S(t)$
\end_inset

 and the 
\emph on
hazard function, 
\emph default
also called the 
\emph on
instantaneous failure rate 
\emph default
denoted by 
\emph on

\begin_inset Formula $h(t)$
\end_inset

.
 
\emph default
The survival function describes the probability of an individual 
\emph on
surviving
\emph default
 (i.e.
 not experiencing an event) longer, than a specified point in time 
\begin_inset Formula $t$
\end_inset

.
 In another words, it is defined as
\begin_inset Formula 
\begin{equation}
S(t)=\Pr(T>t)
\end{equation}

\end_inset

where 
\begin_inset Formula $T$
\end_inset

 is a random variable describing the survival time of an individual.
 
\end_layout

\begin_layout Standard
In contrast, the hazard function, as hinted by its alternative name, gives
 the the instantaneous potential per unit time for the event to occur, given
 that the individual has survived up to time t, that is the hazard function
 is focused on 
\emph on
failing
\emph default
 (i.e.
 event occurring) compared to the survival function which is focused on
 
\emph on
not failing 
\emph default
(i.e.
 surviving) 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 What is meant by the word 
\emph on
potential
\emph default
, is the probability of an event happening within a given time frame and
 as this this potential is 
\emph on
instantaneous
\emph default
, it is given by the following limit
\begin_inset Formula 
\begin{equation}
h(t)=\lim_{\Delta t\to0}\frac{\Pr\left(t\leq T<t+\Delta t\mid T\geq t\right)}{\Delta t}.
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
While the survival functions may seem to be obvious option for describing
 models aimed at predicting survival time, it is usually the hazard function,
 with which the survival models are described by, since it provides a more
 direct measure of risk over time.
 Importantly, either of the function can be derived from the other one using
 the following formulae
\begin_inset Formula 
\begin{equation}
S(t)=\exp\left[-\intop_{0}^{t}h(u)du\right]\label{eq: Hazard to Survival}
\end{equation}

\end_inset


\begin_inset Formula 
\begin{equation}
h(t)=-\left(\frac{\frac{dS(t)}{dt}}{S(t)}\right)
\end{equation}

\end_inset


\end_layout

\begin_layout Subsection
Hazard Ratio
\begin_inset CommandInset label
LatexCommand label
name "subsec:Hazard-Ratio"

\end_inset


\end_layout

\begin_layout Standard
One of the most common goals of survival analysis is to describe a correlation
 between a given 
\emph on
exposure variable
\emph default
 ( i.e.
 a feature of an instance in the data) and the 
\emph on
outcome variable
\emph default
 (e.g.
 survival time).
 This relationship is described using the 
\emph on
hazard ratio
\emph default
 (HR), which describes the relative risk of an event occurring in one group
 compared to another , i.e.
 it is calculated as the ratio of the hazard functions of the two groups
\begin_inset Formula 
\begin{equation}
\mathrm{HR}(t)=\frac{h_{1}(t)}{h_{2}(t)}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
A hazard ratio of 1, means that the probability of an event occurring at
 a given time is the same in both groups.
 If, for example, said groups are sorted by the value of a certain exposure
 variable and their hazard ratio is 1, this means that there is no relationship
 between said exposure variable and the outcome variable.
\end_layout

\begin_layout Standard
Analogously, a hazard ratio of 5 would mean that the first group has a five
 times larger hazard than the second group 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
\end_layout

\begin_layout Section
Survival Analysis Methods
\end_layout

\begin_layout Subsection
Kaplan-Meier Estimator 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Kaplan-Meier-Estimator"

\end_inset


\end_layout

\begin_layout Standard
One of the most widely used methods to estimate the survival function is
 the 
\emph on
Kaplan-Meier estimator 
\emph default
that works as follows 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 Let there be a dataset containing 
\begin_inset Formula $n$
\end_inset

 entries with each entry 
\begin_inset Formula $i$
\end_inset

 containing information about the individual's survival time 
\begin_inset Formula $T_{i}$
\end_inset

 and censoring status 
\begin_inset Formula $\delta_{i}$
\end_inset

, where 
\begin_inset Formula $\delta_{i}=1$
\end_inset

 if an event has been observed at time 
\begin_inset Formula $T_{i}$
\end_inset

 and 
\begin_inset Formula $\delta_{i}=0$
\end_inset

 if the entry is right censored.
 Let 
\begin_inset Formula $\tau$
\end_inset

 denote the set of all unique event times, i.e 
\begin_inset Formula $\tau\coloneqq\left\{ T_{i}\mid\delta_{i}=1,\:i=0,\ldots,n\right\} ,$
\end_inset

 let 
\begin_inset Formula $f_{j}$
\end_inset

 denote the denote the number of individuals who fail at time 
\begin_inset Formula $t_{j}$
\end_inset

 and let 
\begin_inset Formula $r_{j}$
\end_inset

 denote the number of individuals at risk at time 
\begin_inset Formula $t_{j}$
\end_inset

 (i.e.
 have yet to experience an event or are yet to be censored), then 
\begin_inset Formula $\forall t_{j}\in\tau$
\end_inset

 the probability of an individual surviving past 
\begin_inset Formula $t_{j}$
\end_inset

 for 
\begin_inset Formula $j=1,\ldots,|\tau|$
\end_inset

 given that they have already survived until at least 
\begin_inset Formula $t_{j}$
\end_inset

 is given by the conditional probability 
\begin_inset Formula $\Pr(T>t_{j}\mid T\geq t_{j})$
\end_inset

 that is deductible from the dataset as follows
\begin_inset Formula 
\begin{equation}
\Pr(T>t_{j}\mid T\geq t_{j})=1-\frac{f_{j}}{r_{j}}.
\end{equation}

\end_inset

Note that the number of individuals at risk does not take in account the
 individuals that were previously censored, that is 
\begin_inset Formula $r_{j}=r_{j-1}-f_{j-1}-c_{j-1}$
\end_inset

, where 
\begin_inset Formula $c_{j-1}$
\end_inset

is the number of individuals that were censored during 
\begin_inset Formula $[t_{j-1},t_{j})$
\end_inset

.
 
\end_layout

\begin_layout Standard
The survival function is a function that outputs the probability of surviving
 past a given time 
\begin_inset Formula $t$
\end_inset

, therefore, thanks to the 
\emph on
chain rule
\emph default
 of probability, the 
\emph on
Kaplan-Meier curve
\emph default
 
\begin_inset Formula $\hat{S}$
\end_inset

 estimates the survival function at times 
\begin_inset Formula $t_{1},\ldots,t_{|\tau|}$
\end_inset

 as follows 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset


\begin_inset Formula 
\begin{equation}
\hat{S}(t_{j})=\Pr(T>t_{j})=\prod_{k=1}^{j}\Pr(T>t_{k}\mid T\geq t_{k}).
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Thanks to this notation, the Kaplan-Meier formula is often referred to as
 the 
\emph on
product-limit formula 
\emph default
as it is a product of probabilities that is limited by the time point being
 observed.
 The Kaplan-Meier curve itself assumes that 
\begin_inset Formula $\hat{S}(t)$
\end_inset

 remains constant over 
\begin_inset Formula $t_{j}\leq t<t_{j+1}$
\end_inset

, therefore the curve has a 
\begin_inset Quotes sld
\end_inset

stair-like
\begin_inset Quotes srd
\end_inset

 shape.
\end_layout

\begin_layout Subsection
Log-rank Test
\begin_inset CommandInset label
LatexCommand label
name "subsec:Log-rank-Test"

\end_inset


\end_layout

\begin_layout Standard
The log-rank test is statistical test used to compare the survival distribution
 of two or more groups and decide whether their survival curves are statisticall
y equivalent or not 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 The log-rank statistic is also used as a split-rule criterion for building
 survival trees that are explained in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Random-Survival-Forests"
plural "false"
caps "false"
noprefix "false"

\end_inset

, where it is used to compare the difference in survival times observed
 between the two groups that are created by a possible split in a given
 node of a survival tree.
 Therefore, the following explanation of the log-rank statistic is only
 concerned with comparing two groups.
\end_layout

\begin_layout Standard
Assuming that a dataset contains information about two groups of individuals
 along with their survival time and censoring status, let 
\begin_inset Formula $\tau$
\end_inset

 again denote the set of all unique event times regardless of group.
 Then 
\begin_inset Formula $\forall t_{j}\in\tau$
\end_inset

 an expected count of failures 
\begin_inset Formula $e_{j}^{(i)}$
\end_inset

 is computed for each group
\begin_inset Formula 
\begin{equation}
e_{j}^{(1)}=\frac{r_{j}^{(1)}}{r_{j}^{(1)}+r_{j}^{(2)}}\cdot(f_{j}^{(1)}+f_{j}^{(2)}),\qquad e_{j}^{(2)}=\frac{r_{j}^{(2)}}{r_{j}^{(1)}+r_{j}^{(2)}}\cdot(f_{j}^{(1)}+f_{j}^{(2)})
\end{equation}

\end_inset

where 
\begin_inset Formula $r_{j}^{(i)}$
\end_inset

 is the number of individuals from group 
\begin_inset Formula $i$
\end_inset

 at risk at time 
\begin_inset Formula $t_{j}$
\end_inset

 and 
\begin_inset Formula $f_{j}^{(i)}$
\end_inset

 is the number of failures in group 
\begin_inset Formula $i$
\end_inset

 at time 
\begin_inset Formula $t_{j}.$
\end_inset


\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $O_{i}-E_{i}=\sum_{t_{j}\in\tau}f_{j}^{(i)}-e_{j}^{(i)}$
\end_inset

 represent the sum of the differences between the observed and the expected
 counts of failures over all of the unique event times for group 
\begin_inset Formula $i$
\end_inset

.
 Then the log-rank statistic for the group 
\begin_inset Formula $i$
\end_inset

 is given by 
\begin_inset Formula 
\begin{equation}
L^{(i)}=\frac{(O_{i}-E_{i})^{2}}{\mathrm{Var}(O_{i}-E_{i})}
\end{equation}

\end_inset


\end_layout

\begin_layout Subsection
Cox Regression 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Cox-Regression"

\end_inset


\end_layout

\begin_layout Standard

\emph on
Cox regression
\emph default
, also referred to as the 
\emph on
Cox proportional hazards model
\emph default
, is a mathematical model used for analysis of time-to-event data.
 Specifically, it is used to model an individual's hazard function based
 on a set of given predictor variables 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 It is commonly used in medical research to investigate the factors that
 influence the duration until an event occurs.
 For example, it can be used to predict survival curves of patients who
 have undergone kidney transplantation and for identifying factors that
 impact the likelihood of graft failure.
\end_layout

\begin_layout Subsubsection
Formula
\end_layout

\begin_layout Standard
The general formula of the Cox regression model describes the hazard function
 as 
\begin_inset Formula 
\begin{equation}
h(t,\mathbf{X})=h_{0}(t)\exp\left(\sum_{i=1}^{k}\beta_{i}X_{i}\right)\label{eq: Cox regression}
\end{equation}

\end_inset

where 
\begin_inset Formula $\mathbf{X}=\left(X_{1},X_{2},\ldots X_{k}\right)$
\end_inset

 is a set of 
\begin_inset Formula $k$
\end_inset

 predictor variables, 
\begin_inset Formula $h(t,\mathbf{X})$
\end_inset

 represents the hazard function at time 
\begin_inset Formula $t$
\end_inset

 and given predictor variables 
\begin_inset Formula $\mathbf{X},$
\end_inset


\begin_inset Formula $h_{0}(t)$
\end_inset

 is an unspecified 
\emph on
baseline hazard function
\emph default
 and 
\begin_inset Formula $\beta=\left(\beta_{1},\beta_{2},\ldots,\beta_{k}\right)$
\end_inset

 represent constant coefficients associated with corresponding predictor
 variables.
 The fact that 
\begin_inset Formula $h_{0}$
\end_inset

 is unspecified, makes Cox regression a semi-parametric model (in contrast
 to parametric models, whose functional form is known) 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 Parametric models are more precise when fitted correctly, however it may
 not always be clear which parametric model is appropriate for a given problem.
 As a result, a semi-parametric model is a great tool when uncertain about
 which parametric model to use, as a semi-parametric model will typically
 approximate the results of a correct parametric model 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
A core assumption behind the Cox proportional hazards model and thus by
 extension 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq: Cox regression"
plural "false"
caps "false"
noprefix "false"

\end_inset

 is that the baseline hazard function is dependent only on time, whereas
 the second part of the expression 
\begin_inset Formula $e^{\sum_{i=1}^{k}\beta_{i}X_{i}}$
\end_inset

 only involves the 
\begin_inset Formula $X$
\end_inset

s, which means the predictor variables are time-independent.
 This assumption is called the 
\emph on
proportional hazards
\emph default
 assumption.
 If time-dependent predictor variables were to be considered, a variation
 of the Cox model would be required called the 
\emph on
extended Cox model
\emph default
.
 
\end_layout

\begin_layout Standard
To measure the effect of a particular predictor variable on the overall
 hazard, a 
\emph on
hazard ratio
\emph default
 is calculated without the need to know the baseline hazard function explicitly
 using only estimates of the 
\begin_inset Formula $\beta$
\end_inset

 coefficients.
\end_layout

\begin_layout Subsubsection
Partial Maximum Likelihood Estimation
\end_layout

\begin_layout Standard
The estimates for the 
\begin_inset Formula $\beta$
\end_inset

 coefficients can be obtained using a 
\emph on
partial maximum likelihood
\emph default
 
\emph on
estimation
\emph default
 method and are denoted as 
\begin_inset Formula $\hat{\beta}$
\end_inset

.
 The estimated model would then be 
\begin_inset Formula 
\begin{equation}
\hat{h}(t,\mathbf{X})=\hat{h_{0}}(t)\exp\left(\sum_{i=1}^{k}\hat{\beta_{i}}X_{i}\right)\label{eq:Hazard function estimate}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Given that we have a random sample of 
\begin_inset Formula $n$
\end_inset

 entries 
\begin_inset Formula $Y_{1},Y_{2},\ldots,Y_{n}$
\end_inset

 with each entry containing information about the 
\begin_inset Formula $k$
\end_inset

 predictor variables, survival time 
\begin_inset Formula $T$
\end_inset

 and censoring status 
\begin_inset Formula $\delta$
\end_inset

 and that the sample comes from an unknown joint probability distribution.
 Then the maximum likelihood estimation for 
\begin_inset Formula $\beta$
\end_inset

 is given by 
\begin_inset Formula 
\begin{equation}
\hat{\beta}=\arg\max_{\beta\in\Theta}L\left(\beta\right)\label{eq:Max likelihood function}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $L$
\end_inset

 is the maximum likelihood function given by 
\begin_inset Formula 
\begin{equation}
L\left(\beta\right)=\prod_{i=1}^{k}f_{Y_{i}}(y_{i},\beta)
\end{equation}

\end_inset

where 
\begin_inset Formula $f_{Y_{i}}$
\end_inset

is the univariate probability density function associated with the 
\begin_inset Formula $i$
\end_inset

-th random variable from the random sample.
\end_layout

\begin_layout Standard
However, one of the key features of the Cox model is that there is no assumed
 distribution for the survival time, therefore it is not possible to compute
 a 
\emph on
full 
\emph default
maximum likelihood 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
 Therefore, a 
\emph on
partial likelihood
\emph default
 is used, which
\emph on
 
\emph default
only considers probabilities of the subjects who fail, i.e.
 with censoring status 
\begin_inset Formula $\delta=1.$
\end_inset


\end_layout

\begin_layout Standard
This means that the partial likelihood function can be written as
\begin_inset Formula 
\begin{equation}
L=\prod_{j=1}^{p}L_{j}
\end{equation}

\end_inset

where 
\begin_inset Formula $p$
\end_inset

 is the number of failure times within the random sample and 
\begin_inset Formula $L_{j}$
\end_inset

 is the likelihood of failing at the 
\begin_inset Formula $j$
\end_inset

-th time.
 The set of individuals at risk of failing at time 
\begin_inset Formula $j$
\end_inset

 is denoted by 
\begin_inset Formula $R(t_{j})$
\end_inset

.
 It is important to note that while the partial likelihood focuses only
 on the subjects that fail, 
\begin_inset Formula $R(t_{j})$
\end_inset

 also includes the individuals that will be censored later, thus they are
 also needed for the computation of 
\begin_inset Formula $L_{j}$
\end_inset

.
 
\begin_inset Formula $L_{j}$
\end_inset

 is defined as the ratio of the hazard function of the individual, who failed
 at time 
\begin_inset Formula $j$
\end_inset

 over the sum of the hazards of individuals at risk at time 
\begin_inset Formula $j$
\end_inset

, i.e.
 
\begin_inset Formula 
\begin{equation}
L_{j}\left(\beta\right)=\frac{h_{0}\left(t\right)\exp\left(\beta\cdot\mathbf{X}_{j}\right)}{\sum_{i\in R(t_{j})}h_{0}\left(t\right)\exp\left(\beta\cdot\mathbf{X}_{i}\right)}
\end{equation}

\end_inset

where 
\begin_inset Formula $\mathbf{X}_{j}$
\end_inset

 denotes the vector of predictor variables describing the individual who
 failed at time 
\begin_inset Formula $j$
\end_inset

 and 
\begin_inset Formula $\mathbf{X}_{i}$
\end_inset

 for 
\begin_inset Formula $i\in R(t_{j})$
\end_inset

 denotes the vector of predictor variables describing the individuals at
 risk at time 
\begin_inset Formula $j$
\end_inset

.
 As 
\begin_inset Formula $h_{0}\left(t\right)$
\end_inset

 cancels out, the partial likelihood function can be written as 
\begin_inset Formula 
\begin{equation}
L\left(\beta\right)=\prod_{j=1}^{p}\frac{\exp\left(\beta\cdot\mathbf{X}_{j}\right)}{\sum_{i\in R(t_{j})}h_{0}\left(t\right)\exp\left(\beta\cdot\mathbf{X}_{i}\right)}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Once the partial likelihood function 
\begin_inset Formula $L$
\end_inset

 is formed, the equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Max likelihood function"
plural "false"
caps "false"
noprefix "false"

\end_inset

 is generally solved by maximizing the natural log of L, i.e.
 finding the roots of
\begin_inset Formula 
\begin{equation}
\frac{\partial\ln L}{\partial\beta_{i}}=0\qquad\textrm{for \ensuremath{i=1,\ldots,k}}
\end{equation}

\end_inset

This gives us a system of equations that can be solved numerically 
\begin_inset CommandInset citation
LatexCommand cite
key "Survival Analysis self-learn"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Hazard Ratio Estimation
\end_layout

\begin_layout Standard
As described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Hazard-Ratio"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the hazard ratio is defined as the ratio of hazards of two different individua
ls.
 The estimation of the hazard ratio is therefore given by
\begin_inset Formula 
\begin{equation}
\hat{HR}=\frac{\hat{h}(t,\mathbf{X}^{*})}{\hat{h}(t,\mathbf{X})}
\end{equation}

\end_inset

where 
\begin_inset Formula $\mathbf{X}^{*}=\left(X_{1}^{*},X_{2}^{*},\ldots,X_{n}^{*}\right)$
\end_inset

 and 
\begin_inset Formula $\mathbf{X}=\left(X_{1},X_{2},\ldots X_{k}\right)$
\end_inset

 denote the sets of predictors of two different individuals.
 The ratio is commonly written so that the higher-valued hazard is in the
 numerator.
 This ensures that the ratio is always greater than 
\begin_inset Formula $1$
\end_inset

.
 By using 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Hazard function estimate"
plural "false"
caps "false"
noprefix "false"

\end_inset

 we get that 
\begin_inset Formula 
\begin{equation}
\hat{HR}=\frac{\hat{h_{0}}(t)\exp\left(\sum_{i=1}^{k}\hat{\beta_{i}}X_{i}^{*}\right)}{\hat{h_{0}}(t)\exp\left(\sum_{i=1}^{k}\hat{\beta_{i}}X_{i}\right)}=\exp\left(\sum_{i=1}^{k}\hat{\beta_{i}}\left(X_{i}^{*}-X_{i}\right)\right)
\end{equation}

\end_inset

meaning that the hazard ratio stays constant over time, i.e.
 the hazards are 
\emph on
proportional 
\emph default
and the effect of the predictor variables on the hazard rate remains constant
 over time.
\end_layout

\begin_layout Standard
Now, in order to compute the effect of a predictor variable 
\begin_inset Formula $X_{j}$
\end_inset

 on the overall hazard while adjusting for other variables, let vectors
 
\begin_inset Formula $\mathbf{X}^{*}$
\end_inset

 and 
\begin_inset Formula $\mathbf{X}$
\end_inset

 be defined as
\begin_inset Formula 
\begin{equation}
\begin{cases}
X_{i}^{*}=X_{i} & \textrm{for \ensuremath{i\neq j}}\\
X_{i}^{*}\neq X_{i} & \textrm{for \ensuremath{i=j}}
\end{cases}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
The estimated hazard ratio for the predictor variable 
\begin_inset Formula $X_{j}$
\end_inset

 is then given by
\begin_inset Formula 
\begin{equation}
\hat{HR}=\exp\left(\hat{\beta_{j}}\left(X_{j}^{*}-X_{j}\right)\right)
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
As hazard functions are always positive and the ratio is written in way
 as to ensure that it is always greater than 
\begin_inset Formula $1$
\end_inset

, the greater the hazard ratio, the greater the predictor's influence on
 the overall hazard.
\end_layout

\begin_layout Subsubsection
Adjusted Survival Curves
\end_layout

\begin_layout Standard
Upon fitting a Cox regression model onto survival data, survival curves
 that adjust for the predictor variables (also called 
\emph on
adjusted survival curves
\emph default
) are defined in a similar fashion as 
\begin_inset Formula 
\begin{equation}
S(t,\mathbf{X})=S_{0}(t)\exp\left(\sum_{i=1}^{k}\beta_{i}X_{i}\right)
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Using estimates 
\begin_inset Formula $\hat{S_{0}(t)}$
\end_inset

 and 
\begin_inset Formula $\hat{\beta_{i}}$
\end_inset

 computed by the partial likelihood estimation method for 
\begin_inset Formula $S_{0}(t)$
\end_inset

 and 
\begin_inset Formula $\beta_{i}$
\end_inset

 respectively.
 We get an estimated survival function
\begin_inset Formula 
\begin{equation}
\hat{S}\left(t,\mathbf{X}\right)=\hat{S_{0}(t)}\exp\left(\sum_{i=1}^{k}\hat{\beta_{i}}X_{i}\right)
\end{equation}

\end_inset

and by specifying the input vector of predictors 
\begin_inset Formula $\mathbf{X}$
\end_inset

 we get a survival curve adjusted for the given predictors.
\end_layout

\begin_layout Subsubsection
Uses
\end_layout

\begin_layout Standard
The Cox regression model will later be used as a benchmark to compare the
 performance of the machine learning model to a conventional survival analysis
 model.
\end_layout

\begin_layout Chapter
Random Survival Forests
\begin_inset CommandInset label
LatexCommand label
name "sec:Random-Survival-Forests"

\end_inset


\end_layout

\begin_layout Standard

\emph on
Random Survival Forests
\emph default
 (RSF) is an ensemble machine learning method used for analyzing right-censored
 survival data.
 RSF combine the concepts of 
\emph on
survival analysis
\emph default
 and 
\emph on
random forests, 
\emph default
which allows it to handle issues commonly associated with conventional survival
 analysis methods, such as restrictive assumptions about the model's parameters
 (e.g.
 proportionality in the Cox regression model), the inability to handle nonlinear
 relations in the data and issues with missing data, as well as issues associate
d with regular random forest models, such as being restricted to regression
 and classification tasks and the inability to handle right-censored survival
 data 
\begin_inset CommandInset citation
LatexCommand cite
key "Random Survival Forests"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
Each tree in the forest outputs a cumulative hazard function 
\begin_inset Formula $H(t\mid\mathbf{x})$
\end_inset

, which takes a vector of predictive variables 
\begin_inset Formula $\mathbf{x}$
\end_inset

 describing a given individual and time 
\begin_inset Formula $t$
\end_inset

 as inputs, and assigns a probability of an event occurring to the individual
 at time 
\begin_inset Formula $t$
\end_inset

.
 The forest's overall prediction ,i.e.
 
\emph on
the ensemble cumulative hazard,
\emph default
 is then computed as the average of the individual tree predictions.
\end_layout

\begin_layout Standard
Random Survival Forests have been used in a wide range of applications,
 including medicine, engineering, and social sciences, to model survival
 outcomes and identify important prognostic factors.
\end_layout

\begin_layout Section
Building a Random Survival Forests model
\end_layout

\begin_layout Standard
The algorithm for building a RSF model works as follows 
\begin_inset CommandInset citation
LatexCommand cite
key "Random Survival Forests"
literal "false"

\end_inset

.
\end_layout

\begin_layout Enumerate
A set number of subsets is taken from the data using the bootstrap sampling
 method as described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "enu:Sampling-the-data:"
plural "false"
caps "false"
noprefix "false"

\end_inset

, with each sample excluding on average 37% of the original data.
 The excluded data is referred to as 
\emph on
out-of-bag data 
\emph default
(OOB) and is later used for computing the ensemble cumulative hazard.
\end_layout

\begin_layout Enumerate
A 
\emph on
binary survival tree 
\emph default
(BST) is built for each of the bootstrap samples.
 The algorithm for growing a BST generally follows the same principles as
 described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Decision-Trees"
plural "false"
caps "false"
noprefix "false"

\end_inset

 , i.e.
 at each node the algorithm iterates over all possible features and values
 for them and decides on the best split.
 The best split is decided by maximizing the log-rank statistic 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Log-rank-Test"
plural "false"
caps "false"
noprefix "false"

\end_inset

, which compares the survival times of the two groups created by the potential
 split.
 The algorithm is restricted by a criterion that each node should contain
 at least 1 unique event time, which leads to a point when no new splits
 can be made meaning the tree has been fully grown.
 
\end_layout

\begin_layout Enumerate
Once a tree is fully grown, each terminal node outputs a either a survival
 function or a 
\emph on
cumulative hazard function 
\emph default
(CHF) denoted by 
\begin_inset Formula $\hat{H}(t)$
\end_inset

 which is calculated as follows:
\begin_inset Newline newline
\end_inset

Let 
\begin_inset Formula $A$
\end_inset

 denote the set of all terminal nodes, then each node 
\begin_inset Formula $j\in A$
\end_inset

 contains a set of individuals 
\begin_inset Formula $\left(T_{1,j},\delta_{1,j}\right),\ldots,\left(T_{n(j),j},\delta_{n(j),j}\right)$
\end_inset

, where 
\begin_inset Formula $n(j)$
\end_inset

 is the number of cases belonging to the node 
\begin_inset Formula $j$
\end_inset

, 
\begin_inset Formula $T_{i,j}$
\end_inset

 is the survival time of the 
\begin_inset Formula $i$
\end_inset

-th case belonging to the node 
\begin_inset Formula $j$
\end_inset

 , 
\begin_inset Formula $\delta_{i,j}\in\left\{ 0,1\right\} $
\end_inset

 is the censoring status of the 
\begin_inset Formula $i$
\end_inset

-th case at time 
\begin_inset Formula $T_{i,j}$
\end_inset

 , with 
\begin_inset Formula $\delta_{i,j}=0$
\end_inset

 if the individual is right-censored (e.g.
 has a still functioning graft or has been lost to followup) and 
\begin_inset Formula $\delta_{i,j}=1$
\end_inset

 if an event has been observed at a given at time 
\begin_inset Formula $T_{i,j}$
\end_inset

 (e.g.
 graft failure).
 Let 
\begin_inset Formula $t_{1,j}<t_{2,j}<\ldots<t_{N(j),j}$
\end_inset

 denote the unique event times observed in node 
\begin_inset Formula $j$
\end_inset

, where 
\begin_inset Formula $N(j)$
\end_inset

 is the number of observed unique event times and let 
\begin_inset Formula $f_{k,j}$
\end_inset

 and 
\begin_inset Formula $r_{k,j}$
\end_inset

 represent the number of indivudals who experienced an event (fail) or were
 at risk at time 
\begin_inset Formula $t_{k,j}$
\end_inset

 respectively.
 Then either a survival function is calculated using the Kaplan-Meier estimator
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Kaplan-Meier-Estimator"
plural "false"
caps "false"
noprefix "false"

\end_inset

, or a CHF for the node 
\begin_inset Formula $j$
\end_inset

 is given by the Nelson-Maier estimator
\begin_inset Formula 
\begin{equation}
\hat{H}_{j}(t)=\sum_{t_{k,j}\leq t}\frac{d_{k,j}}{Y_{k,j}}\label{eq:node CHF}
\end{equation}

\end_inset


\begin_inset Newline newline
\end_inset

When a new input vector 
\begin_inset Formula $\mathbf{x}$
\end_inset

 is introduced to the model, the tree is followed from the top down until
 a terminal node 
\begin_inset Formula $j\in A$
\end_inset

 is reached.
 The CHF of the whole tree is then given by
\begin_inset Formula 
\begin{equation}
H(t\mid\mathbf{x})=\hat{H}_{j}(t).\label{eq:tree CHF}
\end{equation}

\end_inset


\end_layout

\begin_layout Enumerate
Next, two ensemble cumulative hazards functions are calculated.
 The first, called the 
\emph on
bootstrap ensemble CHF
\emph default
 (denoted by 
\begin_inset Formula $H_{e}^{*}),$
\end_inset

simply averages over all grown survival trees.
 The second, called the 
\emph on
OOB ensemble CHF
\emph default
 (denoted by 
\begin_inset Formula $H_{e}^{**}$
\end_inset

), averages over trees where a given input was not used in the training
 of the given tree i.e.
 is a case of the OOB data.
 Suppose an example 
\begin_inset Formula $\mathbf{x}_{i}$
\end_inset

 is taken from the training dataset, let 
\begin_inset Formula $B$
\end_inset

 denote the total number of bootstrap samples, and let 
\begin_inset Formula $H_{b}^{*}(t|\mathbf{x})$
\end_inset

 denote the CHF predicted by the tree grown from the 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
bootstrap sample 
\begin_inset Formula $b\in\hat{B}$
\end_inset

 and let
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit

\begin_inset Formula 
\[
I_{i,b}=\begin{cases}
1 & \textrm{if \ensuremath{\mathbf{x}_{i}} belongs to the OOB subset of the dataset for bootstrap sample \ensuremath{b}}\\
0 & \textrm{else, i.e. \ensuremath{\mathbf{x}_{i}} was used in the training of a tree grown from the bootstrap sample \ensuremath{b} }
\end{cases}.
\]

\end_inset

The bootstrap ensemble CHF is then defined as
\begin_inset Formula 
\begin{equation}
H_{e}^{*}(t\mid\mathbf{x}_{i})=\frac{1}{B}\sum_{b=1}^{B}H_{b}(t\mid\mathbf{x}_{i})
\end{equation}

\end_inset

where 
\begin_inset Formula $H_{b}(t\mid\mathbf{x}_{i})$
\end_inset

 is the CHF of a tree grown from the bootstrap sample 
\begin_inset Formula $b$
\end_inset

, defined in (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:tree CHF"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\begin_inset Newline newline
\end_inset

In contrast, the OOB ensemble CHF is defined as 
\begin_inset Formula 
\begin{equation}
H_{e}^{**}(t\mid\mathbf{x}_{i})=\frac{\sum_{b=1}^{B}I_{i,b}H_{b}(t\mid\mathbf{x}_{i})}{\sum_{b=1}^{B}I_{i,b}}.\label{eq:OOB ensemble CHF}
\end{equation}

\end_inset


\end_layout

\begin_layout Section
Hyperparameters
\end_layout

\begin_layout Standard
TODO: List hyperparameters
\end_layout

\begin_layout Section
Harell's Concordance Index
\begin_inset CommandInset label
LatexCommand label
name "sec:Harell's-Concordance-Index"

\end_inset


\end_layout

\begin_layout Standard
The prediction error of a random survival forests model is estimated using
 the 
\emph on
Harell's concordance index 
\emph default
(also known as 
\emph on
C-index
\emph default
) 
\begin_inset CommandInset citation
LatexCommand cite
key "Random Survival Forests"
literal "false"

\end_inset

, which is an metric commonly used in medical research to evaluate survival
 models.
 The C-index is defined as the ratio of correctly ordered pairs to comparable
 pairs 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

 (explained in more detail in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Calculating-Harell's-Concordance"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 The C-index is also closely related to the
\emph on
 Area under the ROC curve
\emph default
 (short for Receiver Operating Characteristics curve) also known as AUC,
 which is a graphical plot that illustrates the performance of a binary
 classification model at different classification thresholds 
\begin_inset CommandInset citation
LatexCommand cite
after "Classification - ROC Curve and AUC"
key "ML Crash Course"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
Specifically, it plots the 
\emph on
true positive rate 
\emph default
(TPR)
\emph on
 
\emph default
defined as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
TPR=\frac{TP}{TP+FN}
\end{equation}

\end_inset

where 
\begin_inset Formula $TP$
\end_inset

 is the number of 
\emph on
true positives
\emph default
 (i.e.
 positive cases correctly classified
\emph on
 
\emph default
by the model
\emph on
) 
\emph default
and 
\begin_inset Formula $FN$
\end_inset

 is the number 
\emph on
false negatives
\emph default
 (i.e.
 positive cases incorrectly classified as negative), against the 
\emph on
false positive rate 
\emph default
(FPR) defined as
\begin_inset Formula 
\begin{equation}
FPR=\frac{FP}{FP+TN}
\end{equation}

\end_inset

where 
\begin_inset Formula $FP$
\end_inset

 is the number of 
\emph on
false positives (i.e.
 
\emph default
negative cases incorrectly classified as positive) and 
\begin_inset Formula $TN$
\end_inset

 is the number of 
\emph on
true negatives 
\emph default
(i.e.
 negative cases correctly classified as negative) 
\begin_inset CommandInset citation
LatexCommand cite
key "ML Crash Course"
literal "false"

\end_inset

.
 Lowering the classification threshold results in more cases being classified
 as positive, thus generally increasing both the true positive and the false
 negative rate.
\end_layout

\begin_layout Standard
The area under the ROC curve can be interpreted as the probability that
 a given model will rank a random positive example more highly (e.g.
 it will assign a higher probability of being positive) than a random negative
 example.
 The C-index can attain values from 0 to 1, where 1 means a perfect model
 whose predictions are always correct and 0 being the opposite.
 A random classifier that assigns the predicted value with a uniform distributio
n, will have a C-index of 0.5.
 Generally, models with a C-index above 0.7 are considered to be good predictors.
 An example of a machine learning models that use the AUC for evaluation
 of their performance are classification decision trees 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Decision-Trees"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and by extension random forests used for classification .
\end_layout

\begin_layout Standard
The C-index works in similiar fashion to the AUC in the sense that it compares
 two random individuals, and checks whether the model assigns a more favorable
 hazard function to the patient with longer survival time.
\end_layout

\begin_layout Subsection
Calculating Harell's Concordance Index
\begin_inset CommandInset label
LatexCommand label
name "subsec:Calculating-Harell's-Concordance"

\end_inset


\end_layout

\begin_layout Standard
Not all individuals can be compared to each other as a result of censoring.
 The C-index is therefore calculated as follows 
\begin_inset CommandInset citation
LatexCommand cite
key "Random Survival Forests"
literal "false"

\end_inset

:
\end_layout

\begin_layout Enumerate
Find all possible pairs of cases across the test dataset while excluding
 the following cases: 
\end_layout

\begin_deeper
\begin_layout Itemize
pairs 
\begin_inset Formula $\left((T_{i},\delta_{i}),(T_{j},\delta_{j})\right)$
\end_inset

 where the case with the shorter survival time is right-censored
\begin_inset Newline newline
\end_inset

 i.e.
 
\begin_inset Formula $T_{i}<T_{j}\:\land\:\delta_{i}=0$
\end_inset


\end_layout

\begin_layout Itemize
pairs 
\begin_inset Formula $\left((T_{i},\delta_{i}),(T_{j},\delta_{j})\right)$
\end_inset

 with equal survival times where both cases are also right-censored
\begin_inset Newline newline
\end_inset

i.e.
 
\begin_inset Formula $T_{i}=T_{j}\:\land\:\delta_{i}=\delta_{j}=0$
\end_inset


\end_layout

\begin_layout Standard
The cases that are left are called 
\emph on
permissible 
\emph default
(or 
\emph on
comparable
\emph default
) and we denote their set by 
\begin_inset Formula $P.$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
For each permissible pair 
\begin_inset Formula $\left((T_{i},\delta_{i}),(T_{j},\delta_{j})\right)$
\end_inset

 a value for 
\begin_inset Formula $c_{i,j}$
\end_inset

 is assigned as follows:
\end_layout

\begin_deeper
\begin_layout Enumerate
if 
\begin_inset Formula $T_{i}\neq T_{j}$
\end_inset

 then
\begin_inset Formula 
\[
c_{i,j}=\begin{cases}
1 & \textrm{if \ensuremath{T_{i}<T_{j}\Longrightarrow i} has worse predicted outcome than \ensuremath{j} (\ref{eq:worse outcome def})}\\
0.5 & \textrm{if }\ensuremath{T_{i}<T_{j}\Longrightarrow}\textrm{predicted outcomes of \ensuremath{i} and \ensuremath{j} are tied}\\
0 & \textrm{else}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Enumerate
if 
\begin_inset Formula $T_{i}=T_{j}$
\end_inset


\begin_inset Formula $\:\land\:\delta_{i}=\delta_{j}=1$
\end_inset

 
\begin_inset Formula 
\[
c_{i,j}=\begin{cases}
1 & \textrm{if predicted outcomes of \ensuremath{i} and \ensuremath{j} are tied}\\
0.5 & \textrm{else}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Enumerate
if 
\begin_inset Formula $T_{i}=T_{j}$
\end_inset


\begin_inset Formula $\:\land\:\delta_{i}\neq\delta_{j}$
\end_inset

 
\begin_inset Formula 
\[
c_{i,j}=\begin{cases}
1 & \textrm{if }\delta_{i}=1\Longrightarrow\textrm{\ensuremath{i} has worse predicted outcome than \ensuremath{j} }\\
0.5 & \textrm{else}
\end{cases}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
The C-index is then given by
\begin_inset Formula 
\begin{equation}
C=\frac{1}{\left|P\right|}\sum_{i,j\in P,i\neq j}c_{i,j}.
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Whether a given case has a better or a worse predicted outcome is decided
 as follows.
 Let 
\begin_inset Formula $t_{1},\ldots t_{n}$
\end_inset

 be a set of pre-chosen time points, then case 
\begin_inset Formula $i$
\end_inset

 has a worse predicted outcome than case 
\begin_inset Formula $j$
\end_inset

 if
\begin_inset Formula 
\begin{equation}
\sum_{k=1}^{n}H_{e}^{**}(t_{k}\mid\mathbf{x}_{i})<\sum_{k=1}^{n}H_{e}^{**}(t_{k}\mid\mathbf{x}_{j})\label{eq:worse outcome def}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $\mathbf{x}_{l}$
\end_inset

 is a feature vector of the case 
\begin_inset Formula $l,$
\end_inset

and 
\begin_inset Formula $H_{e}^{**}$
\end_inset

 is the OOB ensemble CHF defined in (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:OOB ensemble CHF"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
The prediction 
\emph on
error
\emph default
 (
\begin_inset Formula $PE$
\end_inset

) is then simply given by 
\begin_inset Formula $PE=1-C$
\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Subsection
Handling Potential Bias
\end_layout

\begin_layout Plain Layout
The problem with the Harell's concordance index is that it is known to evaluate
 the performance of a given model too optimistically, if the ratio of censored
 individuals in the dataset is high 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
 The general trend is that the larger the dataset, the the lesser the censoring
 ratio threshold, above which the regular Harell's C-index starts to overestimat
e the model's performance.
\end_layout

\begin_layout Plain Layout
To adress this issue, the scikit-survival package 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:scikit-survival"
plural "false"
caps "false"
noprefix "false"

\end_inset

 offers an alternative to the conventional C-index called 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
concordance_index_ipcw
\end_layout

\end_inset

.
 Unlike the regular C-index, this alternative does not depend on the distributio
n of the censoring in the test dataset 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
 Instead, it uses the inverse probability of censoring weights to handle
 a potential bias introduced by high amount of censoring 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
 This is achieved by giving additional weight to uncensored individuals
 and computing weights for the censored individuals based on their similarity
 to the uncensored ones.
 To be able to calculate the weights, Kaplan-Meier estimator is computed
 first using survival times and censoring status from the test dataset 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Permutation Variable Importance
\begin_inset CommandInset label
LatexCommand label
name "sec:Permutation-Variable-Importance"

\end_inset


\end_layout

\begin_layout Standard
Since survival trees use the log-rank statistic as a split criterion as
 opposed to impurity used in conventional decision trees, variable importance
 cannot be computed using the mean decrease in impurity method described
 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Feature-Selection"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Consequently, the 
\emph on
permutation feature importance
\emph default
 described in the original paper introducing random forests 
\begin_inset CommandInset citation
LatexCommand cite
key "Random Forests"
literal "false"

\end_inset

, which is fortunately also implemented within the scikit-learn package.
\end_layout

\begin_layout Standard
Permutation importance is calculated by first calculating a baseline metric
 by evaluating the model's performance when trained on the complete set
 of features.
 Next, a feature is permutated from the validation set and the model's performan
ce is evaluated again.
 The permutation importance of a given variable is then given by the the
 difference between the baseline metric and the model's performance after
 permuting said variable 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-learn"
literal "false"

\end_inset

.
\end_layout

\begin_layout Section
Other Methods
\end_layout

\begin_layout Standard
Random Survival Forest is not the only model that combines conventional
 machine learning techniques with survival analysis.
 The scikit-survival library 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:scikit-survival"
plural "false"
caps "false"
noprefix "false"

\end_inset

 also provides implementations of 
\emph on
Survival Support Vector Machine 
\emph default
and 
\emph on
Survival Gradient Boosting.
\end_layout

\begin_layout Subsubsection*
Survival Support Vector Machine
\end_layout

\begin_layout Standard
The survival support vector machine is an extension of the conventional
 
\emph on
support vector machine (SVM)
\emph default
, which is a supervised machine learning model that works by mapping the
 feature vector of each sample into high-dimensional space and calculating
 a hyperplane that seperates them based on their labels, called a 
\emph on
decision boundary
\emph default
.
 When faced with a new input, the SVM makes a decision based on which side
 of the decision boundary the new case falls 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
The survival SVM differs from the regular SVM in the sense that it uses
 survival time as well as censoring status as labels and uses both of these
 to calculate the hyperplane.
 The survival SVM can work with two types of problems: a regression problem
 which outputs predicted survival time and a ranking problem which ranks
 individuals based on their survival time.
 This is however slightly disadvantageous as these types of predictions
 are not easily tranferrable to standard survival analysis outputs, namely
 the survival and hazard functions 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsubsection*
Survival Gradient Boosting
\end_layout

\begin_layout Standard
Survival gradient boosting builds on the basis of regular 
\emph on
gradient boosting
\emph default
, which is an ensemble supervised machine learning technique that works
 by combining predictions of many 
\emph on
weak learners
\emph default
, models that are only slightly better than random guessing, and sequentially
 improving their performance by gradiually optimizing a loss function by
 using its gradient.
 Gradient boosting models generally achieve greater accracy than random
 forests, however take much longer to train 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML,scikit-survival"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
While in the case of conventional gradient boosting the loss function given
 by prediction error (e.q.
 mean squared error), in the case survival gradient boosting the loss function
 is the partial likelihood loss partial likelihood loss Cox regression described
 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Cox-Regression"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
The reasons for why the RSF model was chosen include the above described
 disadvantages of the aformetioned alternatives and promising accuracy that
 the RSF model displayed in the related articles 
\begin_inset CommandInset citation
LatexCommand cite
key "Using ML methods to predict kidney transplant survival,Systematic review"
literal "false"

\end_inset

.
\end_layout

\begin_layout Chapter
Data and Software Architecture
\end_layout

\begin_layout Section
Data Acquisition
\begin_inset CommandInset label
LatexCommand label
name "sec:Data-Acquisition"

\end_inset


\end_layout

\begin_layout Standard
The data used for training was obtained from the United Network for Organ
 Sharing (UNOS) which is a nonprofit organization that manages the organ
 transplant system in the United States.
 The organization oversees transplantation procedures (matching donors,
 ensuring fair graft allocation) for multiple organs such as kidneys, heart,
 lungs, liver, pancreas and intestines.
 As a result, UNOS maintains a large database of organ transplantations
 carried between 1984 and today.
 Specifically, there are more than a million entries regarding kidney transplant
ations, an amount sufficient for training a machine learning model.
\end_layout

\begin_layout Standard
The data can be obtained free of charge via 
\emph on

\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://unos.org
\end_layout

\end_inset


\emph default
 (a VPN may be needed for access from outside the US) upon filling out the
 request form on the website and signing relevant documents regarding the
 use of the data that will be sent via a provided email.
 The data was obtained in the form of a tab-delimited file that was transformed
 into a MongoDB database using the following GitHub repository 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://github.com/ceharvs/transplant2mongo
\end_layout

\end_inset

 .
 The database tables were then converted into a JSON format using the Database
 tools plugin in IntelliJ IDEA Ultimate.
 
\end_layout

\begin_layout Standard
Alongside the data from the UNOS database, another dataset was provided
 by the Czech Institute for Clinical and Experimental Medicine (IKEM), however
 the dataset was limited in size and thus was not suitable for training
 a machine learning model.
 
\end_layout

\begin_layout Standard
As the dataset provided by IKEM was the first to be acquired, the option
 to train the model partly on generated data was considered to supplement
 the limited size of the IKEM dataset, however as the much larger UNOS dataset
 was acquired, this was no longer necessary.
\end_layout

\begin_layout Section
Software Architecture
\end_layout

\begin_layout Standard
A number of software tools and libraries were used for building the survival
 analysis machine learning model, with the backbone of the application being
 the Python based 
\emph on
scikit-survival 
\emph default
package, which is itself built upon the 
\emph on
scikit-learn
\emph default
 package.
 Additionally, the 
\emph on
pandas
\emph default
 and 
\emph on
numpy
\emph default
 libraries were used for both preprocessing of the data and evaluating the
 models performance and finally, the 
\emph on
matplotlib
\emph default
 library was used to provide graphical output in order visually validate
 models performance.
\end_layout

\begin_layout Subsection
Python
\end_layout

\begin_layout Standard

\emph on
Python
\emph default
 is an interpreted, general-purpose, high-level, object-oriented programming
 language that consistently ranks among the most used programming languages
 in the world 
\begin_inset CommandInset citation
LatexCommand cite
key "Octoverse"
literal "false"

\end_inset

.
 The reasons for its popularity include relatively easy human readability,
 built-in data structures such as lists and dictionaries, wide range of
 libraries that provide additional functionality, automatic memory management
 and the fact that Python is cross platform, meaning that code written on
 one machine can easily be run on different machines, regardless of their
 operating system.
 
\begin_inset CommandInset citation
LatexCommand cite
key "Python docs,Python wiki"
literal "false"

\end_inset


\end_layout

\begin_layout Subsection
Jupyter Notebook
\end_layout

\begin_layout Standard

\emph on
Jupyter Notebook 
\emph default
is a notebook authoring web application that provides tools for interactive
 computing with 
\emph on
computational notebooks 
\emph default
(also knows as 
\emph on
notebook interface
\emph default
).
 Computational notebooks are documents that enable users to integrate executable
 computer code, plain text, visualization and other interactive tools in
 a structured manner.
 
\begin_inset CommandInset citation
LatexCommand cite
key "Jupyter Notebook"
literal "false"

\end_inset

 One of the fundamental advantages of computational notebooks is the ability
 to partition code into smaller self-contained units with each unit having
 the result of their execution attached to them.
 This facilitates easier analysis of results and makes information extraction
 more efficient.
 This proves to be beneficial especially in the fields of data analysis
 and machine learning where extracting information from data is of utmost
 importance.
 Jupyter Notebooks are primarily used for executing Python code.
 Nonetheless, as indicated by its name, Jupyter Notebooks also provide support
 for the Julia and R languages.
\end_layout

\begin_layout Subsection
scikit-learn and scikit-survival
\end_layout

\begin_layout Subsubsection*
scikit-learn
\begin_inset CommandInset label
LatexCommand label
name "subsec:scikit-learn"

\end_inset


\end_layout

\begin_layout Standard

\emph on
scikit-learn
\emph default
 is an open-source machine learning Python module.
 It is written in Python and C and it is the most frequently used library
 for machine learning 
\begin_inset CommandInset citation
LatexCommand cite
key "100-page ML"
literal "false"

\end_inset

.
 scikit-learn provides tools for every part of the process of building a
 machine learning model, namely data preprocessing, model selection, fitting,
 and evaluation, among others 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-learn"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsubsection*
scikit-survival
\begin_inset CommandInset label
LatexCommand label
name "subsec:scikit-survival"

\end_inset


\end_layout

\begin_layout Standard

\emph on
scikit-survival 
\emph default
is a Python module built on top of scikit-learn.
 It utilizes the functionalities of scikit-learn for machine learning, while
 allowing the user to implement survival analysis methods in their models
 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
 Included in the library are many of the standard data analysis methods
 including the Kaplan-Meier estimator 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Kaplan-Meier-Estimator"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and Cox Regression 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Cox-Regression"
plural "false"
caps "false"
noprefix "false"

\end_inset

 as well as methods combining survival analysis with machine learning methods
 such as the Random Survival Forests 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Random-Survival-Forests"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 
\end_layout

\begin_layout Subsection
Other libraries 
\end_layout

\begin_layout Subsubsection*
Pandas
\end_layout

\begin_layout Standard

\emph on
Pandas 
\emph default
is an open-source library built on top of the Python programming language
 used for manipulation with data and data analysis in general.
 The core of the library is the 
\emph on
DataFrame 
\emph default
object that is used to organize data in a tabular format.
 Pandas provides a multitude of tools for working with DataFrames including
 the ability to extract statistics about the data, handling of missing values,
 reshaping data sets, as well as the ability to import and export DataFrames
 in various formats such as .csv, .json and more 
\begin_inset CommandInset citation
LatexCommand cite
key "Pandas"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsubsection*
NumPy
\end_layout

\begin_layout Standard

\emph on
NumPy 
\emph default
is an open-source Python library used for working with numerical data.
 More specifically, it provides tools for working with multidimensional
 numerical arrays and is widely used in other data analysis oriented libraries
 such as Pandas, Matplotlib and scikit-learn.
 The centerpiece of the library is the 
\emph on
ndarray
\emph default
 which is a homogenous 
\begin_inset Formula $n$
\end_inset

-dimensional array object, that is equipped with methods to efficiently
 operate on it 
\begin_inset CommandInset citation
LatexCommand cite
key "NumPy"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsubsection*
Matplotlib
\end_layout

\begin_layout Standard

\emph on
Matplotlib 
\emph default
is a Python library based on NumPy used for creating both static and animated
 visualizations of data.
 These visualizations mainly appear in various types of plots such as line
 plots, histograms, scatter plots, and 3D plots.
 It draws inspiration from the MATLAB programming language and Matplotlib
 itself provides an extension called 
\emph on
Pyplot
\emph default
, which is a collection of functions that replicate the behaviour of MATLAB
 for Python 
\begin_inset CommandInset citation
LatexCommand cite
key "Matplotlib"
literal "false"

\end_inset

.
 In the field of machine learning, matplotlib is often used to validate
 and evaluate the training process of a machine learning model in order
 to prevent overfitting or underfitting.
\end_layout

\begin_layout Subsection
Cluster Computing
\end_layout

\begin_layout Standard
Due to the large size of the tables extracted from the UNOS dataset, reaching
 up to 40GB in the JSON format, conducting any meaningful operations locally
 became infeasible since in order to do any sort of processing, the data
 needed to be first loaded into main memory, which, in my case, had a capacity
 of only 12GB.
 As a result, all computing was conducted remotely on the HELIOS high-performanc
e computing cluster hosted at the Department of Mathematics, Faculty of
 Nuclear Sciences and Physical Engineering, Czech Technical University in
 Prague.
 The cluster can provide up to 384GB of main memory on a single node, which
 was more than enough for the needs of this project.
 The connection to the cluster was established using SSH in the Linux shell.
 To enhance practicality, I configured node forwarding from the remote node
 to localhost, which allowed me to interact with Jupyter notebooks directly
 via a web browser on my machine.
 More information about the cluster such as about the hardware specs can
 be found at 
\begin_inset CommandInset citation
LatexCommand cite
key "HELIOS"
literal "false"

\end_inset

.
\end_layout

\begin_layout Chapter
Model Training
\end_layout

\begin_layout Standard
The code used for training the machine learnign model including pipelines
 used for data preprocessing, training and evaluating the model are publicly
 available at 
\begin_inset Newline newline
\end_inset


\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://github.com/matejkloucek/bp_don_rec_compatibility
\end_layout

\end_inset

 
\begin_inset Newline newline
\end_inset

in the form of Jupyter Notebooks.
 Intructions on how to properly execute them are included in the README
 file located in the above GitHub repository.
\end_layout

\begin_layout Section
Data Preprocessing
\end_layout

\begin_layout Subsection
Separating Living and Deceased Donors
\end_layout

\begin_layout Standard
There are 6 tables to be extracted from the UNOS dataset using MongoDB as
 mentioned in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Data-Acquisition"
plural "false"
caps "false"
noprefix "false"

\end_inset

, though only 3 are relevant to this study.
 These 3 being: 
\end_layout

\begin_layout Itemize
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidney_Pancreas
\end_layout

\end_inset

, which contains information about kidney and pancreas transplantations
 performed between 1994 and 2022 in the US including information about both
 recipients and donors.
\end_layout

\begin_layout Itemize
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Living_Donor
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Deceased_Donor
\end_layout

\end_inset

, which contain more detailed information about living and deceased donors
 respectively.
\end_layout

\begin_layout Standard
The Kidney_Pancreas table also happens to be the largest in terms of file
 size.
 After converting the table to JSON format, the resulting file size reached
 to approximately 40GB.
 Consequently, loading the file into a Pandas DataFrame took a significant
 amount of time.
 Therefore, it proved advantageous to convert all tables from JSON to .csv
 format, which drastically reduced loading time.
 This efficiency can be attributed to the fact that unlike JSON, which stores
 data in a hierarchical structure using key-value pairs, the .csv format
 stores data in a tabular (and therefore faster to read from) format.
\end_layout

\begin_layout Standard
In its original form, the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidney_Pancreas
\end_layout

\end_inset

 dataset contained 
\begin_inset Formula $1108884$
\end_inset

 entries and 
\begin_inset Formula $470$
\end_inset

 columns.
 It contains information about both living and deceased donors, but the
 details regarding the donors are limited in scope, particularly in the
 case of living donors.
 To adress this limitation, a table join was performed with the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Living_Donor
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Deceased_Donor
\end_layout

\end_inset

 tables to provide more information about the donors.
 This merge was based on the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
DONOR_ID
\end_layout

\end_inset

 column, with 
\begin_inset Formula $174381$
\end_inset

 entries sharing a common 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
DONOR_ID
\end_layout

\end_inset

 between the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidney_Pancreas
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Living_Donor
\end_layout

\end_inset

 tables and 
\begin_inset Formula $399822$
\end_inset

 entries sharing it between the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidney_Pancreas
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Deceased_Donor
\end_layout

\end_inset

.
 
\end_layout

\begin_layout Standard
Preliminary experimentations with the data and RSF models have revealed
 that the features impacting graft survival vary between living donor and
 deceased donor transplantations.
 Consequently, the dataset has been split on based on the type of transplantatio
n performed, separating living and decead donor tranplantations.
 Subsequently, independent machine learning models were trained on each
 of the created subsets seperately.
 
\end_layout

\begin_layout Standard
The two new datasets created by the merge and the subsequent split split
 will from now be referred to as too as 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Living
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpand_Deceased
\end_layout

\end_inset

.
 The 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Living
\end_layout

\end_inset

 table had 
\begin_inset Formula $174381$
\end_inset

 entries and 
\begin_inset Formula $649$
\end_inset

 columns, while the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpand_Deceased
\end_layout

\end_inset

 table had 
\begin_inset Formula $399822$
\end_inset

 entries and 
\begin_inset Formula $893$
\end_inset

 columns.
 In both cases, the number of columns is usuallly considered to be high
 for an effective machine learning model as it could lead to overfitting
 and poor explainability.
 Therefore, the number of features had to be reduced significantly.
\end_layout

\begin_layout Subsection
Reducing Number of Features
\end_layout

\begin_layout Standard
In addition to the dataset, UNOS provides a .xlsx file called 
\emph on
STAR Files Data Dictionary
\emph default
 (STAR = Standard Transplant Analysis and Research), which contains information
 about what each of the columns represents.
 This dictionary was used in the following sections to provide context for
 the dataset's features.
\end_layout

\begin_layout Subsubsection*
Simultaneous Transplantations
\end_layout

\begin_layout Standard
The dataset contains information about both kidney and pancreas transplantations
, as they are sometimes performed together in a medical procedure known
 as the 
\emph on
simultaneous kidney-pancreas transplant 
\emph default
(SKP) 
\begin_inset CommandInset citation
LatexCommand cite
key "National Kidney Foundation"
literal "false"

\end_inset

.
 In fact, most (83%) of pancreas transplantation are performed in the context
 of SKP's 
\begin_inset CommandInset citation
LatexCommand cite
key "SKP"
literal "false"

\end_inset

.
 However, the focus of this paper is solely on kidney transplantations and
 the number of SKPs is relatively low compared to the number of stand-alone
 kidney transplantation.
 Therefore individuals , who had undergone a SKP were dropped from the dataset
 and all columns regarding pancreas transplantation were dropped as well.
 These columns were selected manually based on their description in the
 STAR dictionary.
\end_layout

\begin_layout Subsubsection*
Follow-up Data
\end_layout

\begin_layout Standard
As the goal of this paper is to predict compatibility of patients prior
 to transplantation, any column that contains information about the patient's
 status after or at the time of the transplantation had to be removed from
 the dataset.
 This was also done by manually selecting such columns based on their descriptio
n in the STAR dictionary.
 The only follow-up features that were retained are the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
GTIME_KI
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
GSTATUS_KI
\end_layout

\end_inset

 columns, which describe the graft's survival time and censoring status
 respectively.
\end_layout

\begin_layout Subsubsection*
Duplicate Columns
\end_layout

\begin_layout Standard
As the original 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidney_Pancreas
\end_layout

\end_inset

 table also contained some information about donors, duplicate columns were
 created upon merging with the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Living_Donor
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Deceased_Donor
\end_layout

\end_inset

 tables.
 Some were easy to identify as they shared the same name, while others had
 to be identified manually.
 
\end_layout

\begin_layout Subsubsection*
Irrelevant Columns
\end_layout

\begin_layout Standard
The STAR dictionary was also used to identify obviously irrelevant features
 and drop them to speed up the training process.
 These include IDs, codes and form statuses used internall by either UNOS
 or individual transplant centers.
\end_layout

\begin_layout Subsubsection*
Deceased and Living Donor Columns
\end_layout

\begin_layout Standard
As mentioned above, the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidney_Pancreas
\end_layout

\end_inset

 table itself contains limited information about both deceased and living
 donors.
 Therefore, columns regarding deceased donors had to be dropped from the
 dataset used for training of the model for living donors and vice versa.
 This was done excluding columns with high percentage of missing values
 (
\begin_inset Formula $>50\%$
\end_inset

) as the columns regarding deceased donors would be left unfilled in the
 case of grafts from living donors.
 The opposite case was handled in the same fashion accordingly.
\end_layout

\begin_layout Subsubsection*
Low Quality Data
\end_layout

\begin_layout Standard
Dropping columns with high percentage of missing values was also done to
 prevent a significant loss of information by having to either impute large
 amounts of missing values or discarding entries with missing features.
 Columns with only one unqiue value were dropped as well.
\end_layout

\begin_layout Subsubsection*
HLA typing
\end_layout

\begin_layout Standard
As illustrated in the table 
\begin_inset CommandInset ref
LatexCommand ref
reference "HLA mismatch table"
plural "false"
caps "false"
noprefix "false"

\end_inset

, each locus of both the donor and the recipient has two columns.
 These columns are categorical and represent different alleles.
 The number of unique alleles exceeds 
\begin_inset Formula $100$
\end_inset

 in some cases.
 This would create a problem when encoding categorical columns as it would
 create an enormous amount of new columns.
 Fortunately, these columns can be dropped from the dataset as they are
 already used for calculating HLA mismatch and therefore dropping them does
 not result in a significant loss of information.
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
Overall, these measures reduced the number of features to 
\begin_inset Formula $137$
\end_inset

 in the case of 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Living
\end_layout

\end_inset

 and to <number> in the case of 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Deceased_Donor
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsection
Ensuring Correct Formatting
\end_layout

\begin_layout Standard
Upon loading the dataset into a DataFrame, many of the columns had incorrect
 data types.
 Specifically there were two issues:
\end_layout

\begin_layout Enumerate
Categorical variables that were described using digits were incorrectly
 classified as numerical.
 This would lead to misleading results and had to be dealt with by identifying
 these columns using the STAR dictionary and changing their data type to
 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
object
\end_layout

\end_inset

 so that they could be encoded later.
\end_layout

\begin_layout Enumerate
Columns containing dates were formatted as strings and were thus identified
 as categorical.
 This would lead to problems when encoding since there would be a new column
 created for every unique time.
 This was dealt with by only using the year and setting its datatype to
 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
float64
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsection
Imputing Missing Values
\end_layout

\begin_layout Standard
Missing values were imputed using scikit-learn's 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
SimpleImputer()
\end_layout

\end_inset

 with the 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
mean
\end_layout

\end_inset

 strategy for numerical features and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
most_frequent
\end_layout

\end_inset

 strategy for categorical features.
\end_layout

\begin_layout Subsection
Feature Encoding
\end_layout

\begin_layout Standard
The RSF model requires all input variables to be numerical.
 However, many of the features in the dataset were categorical and therefore
 had to be encoded before they could be used for training the RSF model.
 Scikit-learn's OneHotEncoder was used to encode the categorical variables.
 Encoding the whole 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Living
\end_layout

\end_inset

 dataset resulted in the training dataset having 
\begin_inset Formula $812$
\end_inset

 columns after merging with the categorical values.
 In the case of 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Deceased
\end_layout

\end_inset

, this number reached to <number>.
\end_layout

\begin_layout Standard
After feature selection described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Feature-Selection"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the encoded dataset had 
\begin_inset Formula $111$
\end_inset

 columns in the case of 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Living
\end_layout

\end_inset

 and <number> in the case of 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
Kidpan_Deceased
\end_layout

\end_inset

.
 After training
\end_layout

\begin_layout Section
Feature Selection
\begin_inset CommandInset label
LatexCommand label
name "sec:Feature-Selection"

\end_inset


\end_layout

\begin_layout Standard
After training the model on the whole dataset, the performance of the model
 described by the C-index was 
\begin_inset Formula $0.6345$
\end_inset

 for the living donor model and <number> for the deceased donor model.
 The hyperparameters used for this training were set to: 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
n_estimators=100
\end_layout

\end_inset

, 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
min_samples_split=10
\end_layout

\end_inset

, 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
min_samples_leaf=10
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
max_depth=None
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
In order to simplify the model and improve its performance, the best features
 were selected by calculting their importance using permutation importance
 described in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Permutation-Variable-Importance"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In comparsion to variable importance calculated by the Gini importace 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Feature-Selection"
plural "false"
caps "false"
noprefix "false"

\end_inset

, computing permutation importance is a very time consuming task.
 The scikit-learn's implementation of permutation importance offers a 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
n_repeats
\end_layout

\end_inset

 parameter, which controls the number of times a feature is permutated in
 the dataset reslting in increased accuracy of the feature importance by
 reducing randomness.
 However, this also greatly increases the computational complexity.
 Thus, the variable importances were computed initially on smaller dataset,
 created by dropping all entries with missing features, with 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
n_repeats=5
\end_layout

\end_inset

.
 This was followed by a computation on a larger dataset with imputed missing
 values with 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
n_repeats=1
\end_layout

\end_inset

 .
 The two resulting tables of variable imortances were used to create a list
 of the 23 most important features.
 The varaible importance of those features was then validated by computing
 permutation importance on a dataset consisting only of these features with
 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
n_repeats=5
\end_layout

\end_inset

.
 In addition, the 4 columns regarding HLA typing (
\begin_inset Flex Code
status open

\begin_layout Plain Layout
AMIS, BMIS, DRMIS, HLAMIS
\end_layout

\end_inset

) were added to study their influence on the graft's long term survival,
 resulting in 27 features being selected in total.
\end_layout

\begin_layout Standard
The selected features along with their description and varaible importance
 can be found in table 
\begin_inset CommandInset ref
LatexCommand ref
reference "variable importance table"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Variable Importance
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\lang english
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
resizebox{
\backslash
textwidth}{!}{
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="25" columns="5">
<features booktabs="true" tabularvalignment="middle">
<column alignment="left" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<column alignment="right" valignment="top">
<row>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Feature
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Mean Importance
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
St.
 Dev.
 Importance
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Description
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Data type
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
AGE
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.024871
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.007475
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's age
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
AGEDON
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.012540
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001580
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Donor's age
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
PRI_PAYMENT_TCR_KI
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.012119
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001041
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's primary payment source
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ETHCAT
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.010511
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.002499
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's ethnicity category
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
END_BMI_CALC
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.009909
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001080
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's BMI
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
TOT_SERUM_ALBUM
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.009846
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001971
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's total serum albumin
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
WORK_INCOME_TCR
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.009702
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000435
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Is recipient working for income
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
PRE_TX_TXFUS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.009500
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001591
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Did recipient recieve transfusion
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ETHCAT_DON
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.009020
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000407
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Donor's ethnicity category
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DIABETES_DON
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008933
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000531
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Donor's diabetes status
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DAYSWAIT_CHRON_KI
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008736
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000717
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Days recipient spent on waiting list
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
EBV_SEROSTATUS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008692
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000600
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's status of Epstein-Barr virus
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ON_DIALYSIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008667
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000418
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Is recipeint regularly administered dialysis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
PREV_TX_ANY
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008667
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000627
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's past transplantations
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DAYSWAIT_ALLOC
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008268
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000643
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Days recipient was prioritised for allocation
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
HCV_SEROSTATUS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008215
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000306
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's Hepatitis C status
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
HIST_CIG
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008208
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001030
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's history of cigarette use
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
FUNC_STAT_TCR
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.008014
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000208
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's overall health status
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
KI_CREAT_PREOP
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.007738
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000611
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Donor's creatinine level
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DIAB
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.007714
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000167
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's diabetes status
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
PERIP_VASC
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.007668
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.000300
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Recipient's peripheral vascular disease status
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Categorical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
AMIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.006838
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001141
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Mismatch at the HLA-A locus
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DRMIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.005818
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.002427
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Mismatch at the HLA-DR locus
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
BMIS
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.003345
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.001171
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Mismatch at the HLA-B locus
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Numerical
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "variable importance table"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using the same hyperparameters as before, the C-index of the model using
 the reduced list of features improved to 
\begin_inset Formula $0.6366$
\end_inset

.
 
\end_layout

\begin_layout Section
Hyperparameter Tuning 
\end_layout

\begin_layout Standard
While for training of the inital models and feature selection the dataset
 has been split into only the training and the test set, with 80% of the
 dataset being reserved for training and 20% for testing.
 For hyperparameter tuning, the dataset has been split into three folds:
 the training, validation and test sets with the ratio being 70% for training
 and 15% for validation and testing each.
 See 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Splitting-Data-into"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for why this was done.
\end_layout

\begin_layout Standard
After experimenting with different combinations of hyperparameters using
 grid search 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Hyperparameter-tuning"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the optimal parameters were found to be: 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
n_estimators=200
\end_layout

\end_inset

, 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
min_samples_split=10
\end_layout

\end_inset

, 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
min_samples_leaf=15
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status open

\begin_layout Plain Layout
max_depth=None
\end_layout

\end_inset

.
 Using these hyperparameters for training the dataset resulted in the improvemen
t of the model's C-index to 
\begin_inset Formula $0.6374$
\end_inset

.
\end_layout

\begin_layout Section
Example Usage
\end_layout

\begin_layout Standard
Once trained, the model can be used to predict allograft's survival as well
 as cummulative hazard functions based on information about the recipient
 and the donor as listed in table 
\begin_inset CommandInset ref
LatexCommand ref
reference "variable importance table"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In addition, the model can also be used to predict a risk score 
\begin_inset Formula $R$
\end_inset

, which is given by 
\begin_inset Formula 
\begin{equation}
R\left(\mathbf{x}\right)=\sum_{j=1}^{n\left(h\right)}H\left(T_{j}\mid\mathbf{x}\right)
\end{equation}

\end_inset

where 
\begin_inset Formula $\mathbf{x}$
\end_inset

 is an input feature vector, 
\begin_inset Formula $h$
\end_inset

 is the terminal node that was reached when 
\begin_inset Formula $\mathbf{x}$
\end_inset

 was introduced, 
\begin_inset Formula $n\left(h\right)$
\end_inset

 is the number of unique event times in node 
\begin_inset Formula $h$
\end_inset

 and 
\begin_inset Formula $H\left(t\mid\mathbf{x}\right)$
\end_inset

 is the cummulative hazard function defined in 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:tree CHF"
plural "false"
caps "false"
noprefix "false"

\end_inset

 
\begin_inset CommandInset citation
LatexCommand cite
key "scikit-survival"
literal "false"

\end_inset

.
 This risk score could be a good way to quantify the compatibility between
 a potential donor-recipient pairing.
\end_layout

\begin_layout Standard
Illustrated in figures 
\begin_inset CommandInset ref
LatexCommand ref
reference "surv_example"
plural "false"
caps "false"
noprefix "false"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "hazard_example"
plural "false"
caps "false"
noprefix "false"

\end_inset

 are predicted survival functions, cummulative hazard functions and risk
 scores of 5 randomly selected samples from the test set.
 In case they were censored, the dotted line represens their observed time
 of censoration, else, the dashed line represents their graft failure time.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Predicted survival functions
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename Images/surv_example_no_title.pdf
	scale 60

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "surv_example"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Predicted cummulative hazard functions
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename Images/hazard_example_no_title.pdf
	scale 60

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "hazard_example"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Model evaluation
\end_layout

\begin_layout Section
General evaluation
\end_layout

\begin_layout Standard
The accuracy of the model given by the C-index is lower than the one developed
 in 
\begin_inset CommandInset citation
LatexCommand cite
key "Using ML methods to predict kidney transplant survival"
literal "false"

\end_inset

 which had a C-index of 
\begin_inset Formula $0.7$
\end_inset

.
 This is because they used predictors that are unkown prior to the transplantati
on itself.
 One such example is the 
\emph on
cold ischemia time
\emph default
, which describes the time the graft spends outside the body of both the
 donor and recipient.
 This feature in particular has a significiant impact the the recipient's
 survival curve, thus giving their model a significant boost in accuracy.
 However, as mentioned before, the goal of this paper is to develop a machine
 learning model that can be used for computing compatibility in order to
 match the suitable pairs of recipients and donors, which the one developed
 in 
\begin_inset CommandInset citation
LatexCommand cite
key "Using ML methods to predict kidney transplant survival"
literal "false"

\end_inset

 is not suited for.
\end_layout

\begin_layout Standard
TODO: Discuss the the most important features.
\end_layout

\begin_layout Section
Comparison to conventional models
\end_layout

\begin_layout Standard
TODO: Compare the models performance to the Cox's Regression Model
\end_layout

\begin_layout Section
Performance on different population samples
\end_layout

\begin_layout Standard
TODO: Try to locally differentiate ethnic groups within the UNOS database.
 How does the model perform on different population samples? Are different
 ethnicities more or less compatible?
\end_layout

\begin_layout Section
Usage for Computing Compatibility
\end_layout

\begin_layout Standard
TODO: How this model could be used for choosing the most optimal donors.
 In what cases does the age bias matter and when not.
 (If we had more than one recipient and one (or more) donor(s) and we wanted
 to choose, which recipient should recieve the donors kidney, then the model
 would be biased to select the youngest recipient which could result in
 a case where there would be a donor that would be the best possible match
 for an older recipient, but a younger recipient would selected since his
 survival curve would be the most favorable, even though there could be
 more suitable candidates for him.
\end_layout

\begin_layout Standard
However, this would not be an issue in the case where there is only 1 recipient
 and multiple donors.
 Than this model would be suitable for selecting the most compatible donor,
 by selecting the one, upon whose selection would the recipient had the
 best survival curve.
\end_layout

\begin_layout Section
Possibilities for Future Research
\end_layout

\begin_layout Standard
Handling the age bias + creating a model capable of picking the best match
 out of multitude of both donors and recipients.
\end_layout

\begin_layout Chapter*
Conclusion
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
pagestyle{plain}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
addcontentsline{toc}{chapter}{Conclusion}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Text of the conclusion\SpecialChar ldots

\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Possible sources:
\end_layout

\begin_layout Plain Layout
Cox Regression:
\end_layout

\begin_layout Itemize
Cox, D.
 R.
 (1972).
 Regression models and life tables (with discussion).
 Journal of the Royal Statistical Society, Series B, 34, 187-220.
 
\end_layout

\begin_layout Itemize
Kleinbaum, D.
 G., & Klein, M.
 (2012).
 Survival analysis: A self-learning text (3rd ed.).
 (Mentioned multiple times)
\end_layout

\begin_layout Itemize
Springer.
 Allison, P.
 D.
 (2010).
 Survival analysis using SAS: A practical guide (2nd ed.).
 SAS Institute.
 
\end_layout

\begin_layout Itemize
Collett, D.
 (2003).
 Modelling survival data in medical research (2nd ed.).
 Chapman & Hall/CRC.
 
\end_layout

\begin_layout Itemize
Singer, J.
 D., & Willett, J.
 B.
 (1993).
 It's about time: Using discrete-time survival analysis to study duration
 and the timing of events.
 Journal of Educational Statistics, 18(2), 155-195.
\end_layout

\begin_layout Plain Layout
Survival analysis:
\end_layout

\begin_layout Itemize
https://www2.karlin.mff.cuni.cz/~pesta/NMFM404/survival.html#References
\end_layout

\begin_layout Itemize
https://www2.karlin.mff.cuni.cz/~pesta/NMFM404/ph.html
\end_layout

\begin_layout Itemize
https://www2.karlin.mff.cuni.cz/~pesta/NMFM404-2021.html
\end_layout

\begin_layout Plain Layout
Other:
\end_layout

\begin_layout Itemize
Therneau, T., & Grambsch, P.
 (2000).
 Modeling survival data: extending the Cox model.
 Springer Science & Business Media.
\end_layout

\begin_layout Itemize
Breiman, L.
 (2001).
 Random forests.
 Machine learning, 45(1), 5-32
\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
Nice sentences:
\end_layout

\begin_layout Itemize
The process is repeated in a recursive fashion for each subsequent node.
\end_layout

\begin_layout Itemize
By max- imizing survival difference, the tree pushes dissimilar cases apart.
 Eventually, as the number of nodes increase, and dissimilar cases become
 separated, each node in the tree becomes homogeneous and is populated by
 cases with similar survival.
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Kidney transplantation"
literal "false"

\end_inset

S.
 J.
 Knechtle, L.
 P.
 Marson, P.
 J.
 Morris,
\emph on
 Kidney Transplantation: Principles and Practice, 
\emph default
Elsevier, 2020.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Chronic kidney allograft loss"
literal "false"

\end_inset

B.
 J.
 Nankivell, D.
 R.
 Kuypers.
 
\emph on
Diagnosis and prevention of chronic kidney allograft loss, 
\emph default
The Lancet, Vol.
 378, Issue 9800, 2011, 1428-1437.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Systematic review"
literal "false"

\end_inset

S.
 Senanayake, N.
 White, N.
 Graves, H.
 Healy, K.
 Baboolal, S.
 Kularatna.
 
\emph on
Machine learning in predicting graft failure following kidney transplantation:
 A systematic review of published predictive models
\emph default
, International Journal of Medical Informatics, Vol.
 130, 2019, 103957, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.sciencedirect.com/science/article/pii/S1386505619302977
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Dialysis"
literal "false"

\end_inset

D.D.
 Aufhauser Jr., et al.
 
\emph on
Impact of prolonged dialysis prior to renal transplantation.

\emph default
 Clin Transplant, 2018 Jun, 32(6):e13260.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Using ML methods to predict kidney transplant survival"
literal "false"

\end_inset

E.
 Mark, D.
 Goldsman, B.
 Gurbaxani, P.
 Keskinocak, J.
 Sokol.
 
\emph on
Using machine learning and an ensemble of methods to predict kidney transplant
 survival
\emph default
.
 PLoS ONE 14(1), 2019, e0209068, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://doi.org/10.1371/journal.pone.0209068
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "100-page ML"
literal "true"

\end_inset

A.
 Burkov: 
\emph on
The Hundred-Page Machine Learning Book
\emph default
.
 Andriy Burkov, 2019.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Hands-On ML"
literal "true"

\end_inset

A.
 Géron: 
\emph on
Hands-On Machine Learning with Scikit-Learn, Keras, and TensorFlow 2nd Edition
\emph default
.
 O'Reilly Media, 2019.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Foundations of ML"
literal "true"

\end_inset

M.
 Mohri, A.
 Rostamizadeh, A.
 Talwalkar: 
\emph on
Foundations of Machine Learning
\emph default
.
 MIT Press, 2018.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Gini importance"
literal "false"

\end_inset

C.
 Strobl, A.
 Boulesteix, A.
 Zeileis, T.
 Hothorn, 
\emph on
Bias in random forest variable importance measures: illustrations, sources
 and a solution
\emph default
.
 BMC Bioinformatics.
 2007 Jan 25;8:25.
 
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Random Forests"
literal "false"

\end_inset

L.
 Breiman, 
\emph on
Random Forests
\emph default
, Machine Learning, 45, 5-32, 2001
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "CKD: Global Dimensions and Perspectives"
literal "false"

\end_inset

Chronic kidney disease: global dimension and perspectives
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Analysis of Survival Data"
literal "false"

\end_inset

D.
 R.
 Cox, D.
 Oakes: 
\emph on
Analysis of Survival Data.
 
\emph default
Chapman & Hall, 1984.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Random Survival Forests"
literal "false"

\end_inset

H.
 Ishwaran, U.
 B.
 Kogalur, E.
 H.
 Blackstone.
 M.
 S.
 Lauer: 
\emph on
Random survival forests.
 
\emph default
Ann.
 Appl.
 Stat.
 2 (3) 841 - 860, September 2008.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "ML Crash Course"
literal "false"

\end_inset

Google Developers, 
\emph on
Machine Learning Crash Course, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://developers.google.com/machine-learning/crash-course
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Survival Analysis self-learn"
literal "false"

\end_inset

D.
 G.
 Kleinbaum, M.
 Klein, 
\emph on
Survival Analysis: A Self-Learning Text 3rd Edition.
 
\emph default
Springer, 2012.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "scikit-survival"
literal "false"

\end_inset

S.
 Pölsterl, 
\emph on
scikit-survival:
\emph default
 
\emph on
A Library for Time-to-Event Analysis Built on Top of scikit-learn
\emph default
.
 Journal of Machine Learning Research, vol.
 21, no.
 212, pp.
 1–6, 2020.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "scikit-learn"
literal "false"

\end_inset

Pedregosa et al., 
\emph on
Scikit-learn: Machine Learning in Python
\emph default
, JMLR 12, pp.
 2825-2830, 2011.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Octoverse"
literal "false"

\end_inset

Github, 
\emph on
The state of open source software.
 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://octoverse.github.com/2022/top-programming-languages
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Python docs"
literal "false"

\end_inset

Python Software Foundation, 
\emph on
Python Documentation, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://docs.python.org/3/
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Python wiki"
literal "false"

\end_inset

The Python Wiki, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://wiki.python.org/moin/
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "HELIOS"
literal "false"

\end_inset

Pavel Strachota, 
\emph on
HELIOS cluster documentation, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://helios.fjfi.cvut.cz/
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Jupyter Notebook"
literal "false"

\end_inset

Project Jupyter, 
\emph on
Jupyter Notebook Documentation, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://jupyter-notebook.readthedocs.io/en/latest/notebook.html
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Pandas"
literal "false"

\end_inset

The pandas development team, 
\emph on
Pandas, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://pandas.pydata.org/about/
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "NumPy"
literal "false"

\end_inset

NumPy Developers, 
\emph on
NumPy, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://numpy.org/doc/stable/user/absolute_beginners.html
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Matplotlib"
literal "false"

\end_inset

Matplotlib Development Team, 
\emph on
Matplotlib, 
\emph default

\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://matplotlib.org/
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Predicting survival using tree-based modeling"
literal "false"

\end_inset

S.
 Krikov et.
 al., 
\emph on
Predicting Kidney Transplant Survival Using Tree-Based Modeling
\emph default
.
 ASAIO Journal 53(5):p 592-600, September 2007.
 | DOI: 10.1097/MAT.0b013e318145b9f7
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "IPCW"
literal "false"

\end_inset

S.
 J.W.
 Willems, 
\emph on
Inverse Probability Censoring Weights for Routine Outcome Monitoring Data
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "National Kidney Foundation"
literal "false"

\end_inset

National Kidney Foundation, 
\emph on
A to Z Health Guide
\emph default
, 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.kidney.org/atoz/content
\end_layout

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "SKP"
literal "false"

\end_inset

Jiang AT, BHSc, Rowe N, Sener A, Luke P.
 
\emph on
Simultaneous pancreas-kidney transplantation: The role in the treatment
 of type 1 diabetes and end-stage renal disease.

\emph default
 Can Urol Assoc J.
 2014 Mar;8(3-4)
\end_layout

\end_body
\end_document
